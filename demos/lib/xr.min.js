'use strict';(function(k,g){"object"===typeof exports&&"undefined"!==typeof module?module.exports=g():"function"===typeof define&&define.amd?define(g):k.xr=g()})(this,function(){function k(a,d){return{status:a.status,response:a.response,data:d,xhr:a}}function g(a){for(var d=[],e=arguments.length-1;0<e--;)d[e]=arguments[e+1];for(var c in d)if({}.hasOwnProperty.call(d,c)&&(e=d[c],"object"===typeof e))for(var b in e)({}).hasOwnProperty.call(e,b)&&(a[b]=e[b]);return a}function r(a,d){return(a&&a.promise?
a.promise:n.promise||p.promise)(d)}function f(a){return r(a,function(d,e){var c=g({},p,n,a),b=c.xmlHttpRequest();c.abort&&a.abort(function(){e(k(b));b.abort()});b.open(c.method,c.params?c.url.split("?")[0]+"?"+q(c.params):c.url,!0);b.withCredentials=c.withCredentials;b.addEventListener(l.LOAD,function(){if(200<=b.status&&300>b.status){var a=null;b.responseText&&(a=!0===c.raw?b.responseText:c.load(b.responseText));d(k(b,a))}else e(k(b))});b.addEventListener(l.ABORT,function(){return e(k(b))});b.addEventListener(l.ERROR,
function(){return e(k(b))});b.addEventListener(l.TIMEOUT,function(){return e(k(b))});for(var f in c.headers)({}).hasOwnProperty.call(c.headers,f)&&b.setRequestHeader(f,c.headers[f]);for(var h in c.events)({}).hasOwnProperty.call(c.events,h)&&b.addEventListener(h,c.events[h].bind(null,b),!1);f="object"!==typeof c.data||c.raw?c.data:c.dump(c.data);void 0!==f?b.send(f):b.send()})}var m=function(a){switch(typeof a){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?
a:"";default:return""}},q=function(a,d,e,c){d=d||"&";e=e||"=";null===a&&(a=void 0);return"object"===typeof a?Object.keys(a).map(function(b){var c=encodeURIComponent(m(b))+e;return Array.isArray(a[b])?a[b].map(function(a){return c+encodeURIComponent(m(a))}).join(d):c+encodeURIComponent(m(a[b]))}).join(d):c?encodeURIComponent(m(c))+e+encodeURIComponent(m(a)):""},h={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS"},l={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",
PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"},p={method:h.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:function(){return new XMLHttpRequest},promise:function(a){return new Promise(a)},withCredentials:!1},n={};f.assign=g;f.encode=q;f.configure=function(a){n=g({},n,a)};f.Methods=h;f.Events=l;f.defaults=p;f.get=function(a,d,e){return f(g({url:a,method:h.GET,
params:d},e))};f.put=function(a,d,e){return f(g({url:a,method:h.PUT,data:d},e))};f.post=function(a,d,e){return f(g({url:a,method:h.POST,data:d},e))};f.patch=function(a,d,e){return f(g({url:a,method:h.PATCH,data:d},e))};f.del=function(a,d){return f(g({url:a,method:h.DELETE},d))};f.options=function(a,d){return f(g({url:a,method:h.OPTIONS},d))};return f});
