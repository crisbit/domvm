!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.xr=t()}(this,function(){"use strict";var e=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},t=function(t,n,o,r){return n=n||"&",o=o||"=",null===t&&(t=void 0),"object"==typeof t?Object.keys(t).map(function(r){var s=encodeURIComponent(e(r))+o;return Array.isArray(t[r])?t[r].map(function(t){return s+encodeURIComponent(e(t))}).join(n):s+encodeURIComponent(e(t[r]))}).join(n):r?encodeURIComponent(e(r))+o+encodeURIComponent(e(t)):""};const n={GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH",OPTIONS:"OPTIONS"},o={READY_STATE_CHANGE:"readystatechange",LOAD_START:"loadstart",PROGRESS:"progress",ABORT:"abort",ERROR:"error",LOAD:"load",TIMEOUT:"timeout",LOAD_END:"loadend"},r={method:n.GET,data:void 0,headers:{Accept:"application/json","Content-Type":"application/json"},dump:JSON.stringify,load:JSON.parse,xmlHttpRequest:()=>new XMLHttpRequest,promise:e=>new Promise(e),withCredentials:!1};function s(e,t){return{status:e.status,response:e.response,data:t,xhr:e}}function a(e,...t){for(const n in t){if(!{}.hasOwnProperty.call(t,n))continue;const o=t[n];if("object"==typeof o)for(const t in o)({}).hasOwnProperty.call(o,t)&&(e[t]=o[t])}return e}let d={};function i(e){return function(e,t){return(e&&e.promise?e.promise:d.promise||r.promise)(t)}(e,(n,i)=>{const u=a({},r,d,e),p=u.xmlHttpRequest();u.abort&&e.abort(()=>{i(s(p)),p.abort()}),p.open(u.method,u.params?`${u.url.split("?")[0]}?${t(u.params)}`:u.url,!0),p.withCredentials=u.withCredentials,p.addEventListener(o.LOAD,()=>{if(p.status>=200&&p.status<300){let e=null;p.responseText&&(e=!0===u.raw?p.responseText:u.load(p.responseText)),n(s(p,e))}else i(s(p))}),p.addEventListener(o.ABORT,()=>i(s(p))),p.addEventListener(o.ERROR,()=>i(s(p))),p.addEventListener(o.TIMEOUT,()=>i(s(p)));for(const e in u.headers)({}).hasOwnProperty.call(u.headers,e)&&p.setRequestHeader(e,u.headers[e]);for(const e in u.events)({}).hasOwnProperty.call(u.events,e)&&p.addEventListener(e,u.events[e].bind(null,p),!1);const c="object"!=typeof u.data||u.raw?u.data:u.dump(u.data);void 0!==c?p.send(c):p.send()})}return i.assign=a,i.encode=t,i.configure=function(e){d=a({},d,e)},i.Methods=n,i.Events=o,i.defaults=r,i.get=((e,t,o)=>i(a({url:e,method:n.GET,params:t},o))),i.put=((e,t,o)=>i(a({url:e,method:n.PUT,data:t},o))),i.post=((e,t,o)=>i(a({url:e,method:n.POST,data:t},o))),i.patch=((e,t,o)=>i(a({url:e,method:n.PATCH,data:t},o))),i.del=((e,t)=>i(a({url:e,method:n.DELETE},t))),i.options=((e,t)=>i(a({url:e,method:n.OPTIONS},t))),i});
