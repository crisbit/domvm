/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(v){var r=("undefined"==typeof window?{}:window).requestAnimationFrame,u={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},m={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!m.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&m.isFunc(c.then)},execAll:function(c,d,l,b,n,g){var p;c&&(m.isArr(c)?c:[c]).forEach(function(c){p=c.call(null,d,l,b,n,g)});return p},tick:function(c,d){d&&r?r&&r(function(){m.tick(c,d-1)}):m.isArr(c)?c[0].apply(null,c.slice(1)):
c()},insertArr:function(c,d,l,b){c.splice.apply(c,[l,b].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||u[c]?d:d+"px"},deepSet:function(c,d,l){d=d.split(".");var b=d.pop();d.forEach(function(b){c[b]||
(c[b]={});c=c[b]});c[b]=l},deepGet:function(c,d){var l=d.split(".");do c=c[l.shift()];while(l.length);return c},keyedIdx:function(c,d,l,b,n){for(b=0;b<d.length;b++)if(n=d[b],n.key===c)if(l){if(n.vm&&n.vm.view[0]===l)return b}else return b;return-1},raft:function(c){function d(){l=0;c.apply(b,n)}if(!r)return c;var l,b,n;return function(){b=this;n=arguments;l||(l=r(d))}}};v.utils=m})(domvm);(function(v){function r(){for(var a;a=N.pop();)a[0].apply(null,a.slice(1))}function u(a,f){return!1===f?null:null==f&&null!=a?a:k.isVal(f)||k.isObj(f)||k.isArr(f)||k.isFunc(f)?f:null}function m(a,f,z,b,e,w){function F(a,f,e){if(e)a[f]=a[f]||[],a[f].push(e);else for(var c in f)a[c]=a[c]||[],a[c].push(f[c])}function q(a,f,c){e=a;w=f;t.update(c,!1);return C(0,!1)}function C(a,c){if(a){for(var b=t;a--&&b.parent;)b=b.parent;b.redraw(0,!0);return b.vm}(b=t.node)&&d(t,"willRedraw",t);t.refs={};var y=t.render.call(t.api,
t,f,z),y=n(y,e,w,t);y.vm=t;t.node=y;var q=k.isVal(z)&&"^"===z[0]?z.substr(1):k.isVal(y.ref)&&"^"===y.ref[0]?y.ref.substr(1):null;y.key=null!=z?z:y.key;for(var h=e;h;)h.vm&&(t.parent||(t.parent=h.vm),null!==q&&k.deepSet(h.vm.refs,q,y)),h=h.parent;if((q=b)&&(y.type!==b.type||y.tag!==b.tag))var q=null,C=!0,F=b.el.parentNode;g(y,q);e&&(e.body[w]=y);!1!==c&&(b&&l(b),!b&&m||p(y,null,y.el),C&&(F||y.parent.el).insertBefore(y.el,F.childNodes[b.idx]));b&&d(t,"didRedraw",t);!1!==c&&k.tick(r,2);return t}var m=
!e;k.isArr(a)&&(f=a[1],z=a[2],b=a[3],a=a[0]);z=u(f,z);var t={api:{},node:null,view:[a,z],model:f,opts:b||{},render:null,update:function(a,e){null==a||z===f&&!k.isVal(z)||(f=t.model=a);return!1!==e?C(0):t},on:function(a,f){F(t.events,a,f)},hook:function(a,f){t.hooks=t.hooks||{};F(t.hooks,a,f)},events:{},hooks:null,redraw:J.useRaf?k.raft(C):C,patch:function(a,f){var e=null!=a.el;if(k.isObj(f)){var b="class"in f?(null!=a["class"]?a["class"]+" ":"")+f["class"]:a.props["class"],c="style"in f?f.style:a.props.style;
e&&(e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":b,style:c}},h(e,a));a.props["class"]=b;a.props.style=c}else b=a.parent,e=g(n(f,b,a.idx,t),a),b.body[a.idx]=e},emit:function(a){for(var f=Array.prototype.slice.call(arguments),e=t,b;e;){if(b=e.events[a]){f[0]=b;k.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,mount:function(a,f){var e=null;f&&(a.textContent="",e=a,a=null);p(t.node,e,null,a);return t},attach:function(a){c(t.node,a);return t},unmount:function(){l(t.node)},moveTo:q,updIdx:function(a){w=
a}};b&&b.hooks&&t.hook(b.hooks);k.execAll(G,t);t.render=a.call(t.api,t,f,z);return e?q(e,w):C(0)}function c(a,f){a.el=f;f._node=a;for(var b in a.props){var y=a.props[b],e=k.isEvProp(b)?b:"."===b[0]?b.substr(1):null;null!==e&&(f[e]=y)}if(k.isArr(a.body))for(b=0;b<a.body.length;b++)c(a.body[b],f.childNodes[b])}function d(a,f,b,c,e,h){if(a&&a.hooks&&(a=a.hooks[f]))if(J.useRaf&&"did"==f.substr(0,3))N.push([k.execAll,a,b,c,e,h]);else return k.execAll(a,b,c,e,h)}function l(a,f){var c=a.el&&!a.moved;if(c){var y=
d(a.vm,"willUnmount",a.vm),e=d(a,"willRemove",a),h=y||e;a.removed=!0}k.isArr(a.body)&&a.body.forEach(function(a,e){l(a,f||h)});f||(h?h.then(function(){b(a,c)}):b(a,c))}function b(a,f){null!=a.el&&a.el.parentNode&&(f&&(a.el.parentNode.removeChild(a.el),a.el=null,d(a.vm,"didUnmount",a.vm),d(a,"didRemove",a)),k.isArr(a.body)&&a.body.forEach(function(a,f){b(a,!0)}),a.vm=a.body=null)}function n(a,f,b,c){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,
"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};k.isFunc(e)&&(e=e());if(k.isArr(e)&&e.length){a.type=k.TYPE_ELEM;if(1<e.length){var h=1;k.isObj(e[1])&&(a.props=e[1],h=2);a.body=e.length==h+1?k.isVal(e[h])?e[h]:k.isFunc(e[h])?e[h]():e.slice(h):e.slice(h)}e=e[0];if(/[.#]/.test(e)){if(e=A(e),a.tag=e.tag,h=null!=e["class"],null!=e.id||h){var d=a.props||{};null==d.id&&(d.id=e.id);h&&(a["class"]=e["class"],d["class"]=e["class"]+(null!=d["class"]?" "+d["class"]:""));a.props=
d}}else a.tag=e;if(a.props){var e=a.props,q;for(q in e)k.isEvProp(q)?e[q]=w(e[q],c.opts.evctx||c.model||null,a,c):k.isFunc(e[q])&&("href"==q?(e.onclick=e[q],e.href=e[q].href):e[q]=e[q]()),k.isDynProp(a.tag,q)&&(e["."+q]=e[q]);if(k.isObj(e.style))for(var g in e.style)q=e.style[g],k.isFunc(q)&&(e.style[g]=q());k.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=k.isVal(e._key)?e._key:k.isVal(e._ref)?e._ref:k.isVal(e.id)?e.id:k.isVal(e.name)?e.name:null;null!=e._ref&&(a.ref=e._ref);e._raw&&(a.raw=
!0);null!=e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else k.isVal(e)&&(a.type=k.TYPE_TEXT,a.body=e);null!==a.ref&&k.deepSet(c.refs,a.ref,a);a.parent=f;a.idx=b;a.ns=f&&f.ns?f.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(k.isArr(a.body))for(f=0,b=a.body.length;f<b;f++){g=a.body[f];e=q=null;d=h=!1;k.isFunc(g)&&(g=g());if(null==g)h=!0;else{var l=k.isArr(g),p=l?!1:k.isObj(g);if(l)g.length?k.isArr(g[0])?d=!0:k.isFunc(g[0])?q=u(g[1],g[2]):(e=n(g,a,f,c),
q=e.key):h=!0;else if(p)if(k.isFunc(g.redraw))g.moveTo(a,f),e=g.node,q=g.view[1];else{a.body[f--]=""+g;continue}else""===g?h=!0:0<f&&a.body[f-1].type===k.TYPE_TEXT?(a.body[f-1].body+=""+g,h=!0):e=n(""+g,a,f,c)}h||d?(d?k.insertArr(a.body,g,f,1):a.body.splice(f,1),b=a.body.length,f--):(null!==q&&(a.hasKeys=!0),a.body[f]=e||g)}return a}function g(a,f){f&&(d(a,"willRecycle",f,a),H(f,a),d(a,"didRecycle",f,a));if(k.isArr(a.body)){var b=0;a.body.forEach(function(c,e){var h=k.isArr(c);if(f){var d=x(c,a,f,
b);if(null!==d){var q=d[0],d=d[1];q===b&&b++;q=f.body[q];q.vm?h?2===d?q.vm.moveTo(a,e,c[1]):1===d&&m(c[0],c[1],c[2],c[3],a,e):c.vm&&2===d&&c.vm===q.vm&&q.vm.moveTo(a,e):a.body[e]=g(c,q);return}}h?m(c[0],c[1],c[2],c[3],a,e):a.body[e]=g(c)})}return a}function p(a,f,b,c){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&d(a.vm,"willMount",a.vm);if(a.type==k.TYPE_ELEM)if(e&&(a.el=f||(a.ns?K.createElementNS(D[a.ns],a.tag):K.createElement(a.tag)),a.props&&h(a)),k.isArr(a.body)){f=0;for(var g=a.el.firstChild;f<
a.body.length;f++)g=p(a.body[f],null,g)}else k.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==k.TYPE_TEXT&&e&&(a.el=K.createTextNode(a.body));a.el._node=a;f=a.parent;b!==a.el&&(c||f&&f.el)&&(f=e?"Insert":"Reinsert",d(a,"will"+f,a),(c||a.parent.el).insertBefore(a.el,b),d(a,"did"+f,a));e&&a.vm&&a.vm.hooks&&!a.moved&&d(a.vm,"didMount",a.vm);return b!==a.el?b:b.nextSibling}function x(a,f,b,c,e){var h=k.isArr(a),g=h?u(a[1],a[2]):a.key,d=b.hasKeys,n=f.hasKeys;b=b.body;
f=f.body;if(null!==g&&d)return a=k.keyedIdx(g,b,h?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;e=0===e?0:e||b.length-1;for(g=null;c<=e;c++)if(d=b[c],null!==d&&d.el)if(h&&d.vm){if(d.vm.view[0]===a[0]){if(d.vm.view[1]===u(a[1],a[2]))return[c,2];!g&&n&&-1==k.keyedIdx(d.key,f,d.vm.view[0])&&(g=[c,1])}}else if(a.type===d.type&&(a.type===k.TYPE_TEXT||null!==a.tag&&a.tag===d.tag)&&(null===d.key||!n||-1==k.keyedIdx(d.key,f,d.vm?d.vm.view[0]:null)))return[c,1];return g}function H(a,f){f.el=
a.el;a.el=null;f.el&&(f.el._node=f);if(f.type===k.TYPE_TEXT&&f.body!==a.body)f.el.nodeValue=f.body;else{h(f,a);var b=!k.isArr(f.body),c=!k.isArr(a.body);b&&f.body!==a.body?c&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:c&&!b&&(f.el.textContent="");a.moved=!0}}function A(a){if(a in L)return L[a];var f={tag:null,id:null,"class":null};f.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,c){e&&(f.id=e);c&&(f["class"]=c.replace(/\./g,
" ").trim());return b||"div"});return L[a]=f}function w(a,f,b,c){return function(b){var h,g=b.target._node,d=null;if(k.isFunc(a))h=a.call(f,b,g,c);else if(k.isArr(a))d=a.slice(1),h=a[0].apply(f,d.concat(b,g,c));else if(k.isObj(a))for(var n in a){var w=a[n];b.target.matches(n)&&(k.isArr(w)?(d=w.slice(1),h=w[0].apply(f,d.concat(b,g,c))):k.isFunc(w)&&(h=w.call(f,b,g,c)))}!1===h&&(b.preventDefault(),b.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:g,event:b,
data:d})}}function h(a,b){var c=!b;b=b||{};if(b.props||a.props){var h=b.props||{},e=a.props||{},g=h.style,d=e.style;if(k.isObj(g)||k.isObj(d))E(a.el,a.tag,g||{},d||{},O,B,a.ns,c),h.style=e.style=null;E(a.el,a.tag,h,e,M,I,a.ns,c);d&&(e.style=d)}}function E(a,b,c,h,e,d,g,k){for(var n in h)null!==h[n]&&("."===n[0]?a[n.substr(1)]!==h[n]:h[n]!==c[n])&&e(a,n,h[n],g,k);for(n in c)null!==c[n]&&null==h[n]&&d(a,n,g,k)}function O(a,b,c){a.style[b]=k.autoPx(b,c)}function B(a,b){a.style[b]=""}function M(a,b,c,
h,e){"."===b[0]?(b=b.substr(1),"svg"===h?a[b].baseVal=c:a[b]=c):"class"===b?a.className=c:"id"===b||k.isEvProp(b)?a[b]=c:!1===c?I(a,b,h,e):a.setAttribute(b,!0===c?"":c)}function I(a,b,c,h){h||("."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):"class"===b?a.className="":"id"===b||k.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var D={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L={},K="undefined"==typeof document?{}:document,N=[],J={useRaf:!0};v.view=m;v.view.config=
function(a){J=a};var G=null;v.view.extend=function(a,b){G=!G||b?[]:G;G.push(a)};var k=v.utils;return v})(domvm);(function(v){var r=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,u=v.utils;v.html=function(m){var c="";switch(m.type){case u.TYPE_ELEM:c+="<"+m.tag;if(m.props){var d=u.isVal(m.props.style)?m.props.style:"",l=u.isObj(m.props.style)?m.props.style:null;if(l)for(var b in l)null!==l[b]&&(d+=u.camelDash(b)+": "+u.autoPx(b,l[b])+"; ");for(b in m.props)u.isEvProp(b)||"."===b[0]||(l=m.props[b],u.isFunc(l)&&(l=l()),u.isObj(l)||(!0===l?c+=" "+b:!1!==l&&null!==l&&
"."!==b[0]&&(c+=" "+b+'="'+l+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(m.ns&&"svg"!==m.tag&&"math"!==m.tag&&!m.body)return c+"/>";c+=">";break;case u.TYPE_TEXT:return m.body}r.test(m.tag)||(u.isArr(m.body)?m.body.forEach(function(b){c+=v.html(b)}):c+=m.body||"",c+="</"+m.tag+">");return c}})(domvm);(function(v){var r=v.utils;v.watch=function(u){function m(){}function c(b,c,d,p,x){x=x||{};x.method=b.toUpperCase();null!==d&&(r.isArr(d)||r.isObj(d)?(x.headers=x.headers||new Headers,x.headers.set("Content-Type","application/json"),x.body=JSON.stringify(d)):x.body=""+d);var H=p,A=m;p instanceof Array&&(H=p[0],p[1]&&(A=p[1]));var w={type:"fetch",fetch:{method:b,url:c,body:d}};p=fetch(c,x).then(function(b){if(200<=b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(H,A).then(function(b){!1!==b&&l.fire(w);return b},function(b){w.error=b;l.fire(w);return b});p._fetchArgs=[b,c,d,[H,A],x];return p}var d=[];r.isFunc(u)&&d.push(u);var l={on:function(b){d.push(b);return l},off:function(b){d.splice(d.indexOf(b),1);return l},fire:r.raft(function(b){r.execAll(d,b);return l}),prop:function(b,d){var g=b,p=function(b,c,d){if(arguments.length&&b!==g){var h=g;g=b;d=d||{type:"prop",prop:p,data:{old:h,"new":b}};r.isFunc(c)?
c(d):!1!==c&&l.fire(d)}return g};p._prop=!0;if(d&&d.then){p.update=m;if(d._fetchArgs){var x=d._fetchArgs[3];d._fetchArgs[3]=[function(b){return p(x[0]?x[0](b):b)},x[1]];p.update=function(){c.apply(null,d._fetchArgs)}}d.then(p)}return p.toString=p},sync:function(b,c,d){var p=b,m=c;r.isFunc(p)||(p=function(c,d,g){if("string"==typeof b){var h,n;"e."==b.substr(0,2)?(h=c,n=b.substr(2)):(h=c.target,n=b)}return r.deepGet(h,n)});r.isArr(m)&&(m=function(b,d,g){var h=r.deepGet(c[0],c[1]);b!==h&&(r.deepSet(c[0],
c[1],b),r.isFunc(d)?d(g):!1!==d&&l.fire(g))});return function(b,c,n){var h={type:"sync",vm:n,node:c,event:b};m(p(b,c,n),d,h)}},fetch:c,get:function(b,d,g){g?b+=l.query(d):g=d;return c("get",b,null,g)},"delete":function(b,d,g){g?b+=l.query(d):g=d;return c("delete",b,null,g)},post:function(b,d,g){return c("post",b,d,g)},put:function(b,d,g){return c("put",b,d,g)},patch:function(b,d,g){return c("patch",b,d,g)},query:function(b){if(!r.isObj(b))return"";var c=[],d=encodeURIComponent,l;for(l in b)c.push(d(l)+
"="+d(b[l]));return c.length?"?"+c.join("&"):""}};return l}})(domvm);(function(v){function r(b,c,d,l,m,r){var u=null,w=null,h=null;if("/"==d[0]){h=d;w=!1;l={};r=h.split("#");c=r[0].split("?");u=c[0];r=r[1];c[1]&&(m={},c[1].split("&").map(function(b){b=b.split("=");m[b[0]]=null==b[1]?!0:b[1]}));var E,v;for(v in b){d=b[v];var B=d.path;if(E=u.match(d.regexPath)){w=v;-1!==B.indexOf(":")&&(l={},E.shift(),B.replace(/:([^\/]+)/g,function(b,c){l[c]=E.shift()}));break}}}else{w=d;d=b[w];var B=c+d.path,M=d.vars||{},I=/^[^\/]+$/,h=-1!==B.indexOf(":")?u=B.replace(/:([^\/]+)/g,
function(b,c){if((M[c]||I).test(l[c]))return l[c]+="";throw Error("Invalid value for route '"+B+"' segment '"+c+"': '"+l[c]+"'");}):u=B;if(m){var h=h+"?",D;for(D in m)h+=D+(!0!==m[D]?"="+m[D]:"")+"&";h=h.slice(0,-1)}h+=r?"#"+r:""}return{href:h,name:w,path:u,segs:l,hash:r,query:m}}function u(b,c){for(var d in b){var l=b[d];l.regexPath=new RegExp("^"+c+l.path.replace(/:([^\/]+)/g,function(b,c){var d=""+l.vars[c];return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var m=[],c=null,d=!1,l="";v.route=
function(b,n){function g(){var b=location,b=d?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return r(A,l,b)}var p=null,x={href:function(b,c,g,m,n){var p=r(A,l,b,c,g,m);return d?(b=function(b){x["goto"](p,null,null,null,n);b.preventDefault()},b.href=p.href,b):"#"+p.href},config:function(b){(d=b.useHist)&&(l=b.root||"");p=b.init||null},refresh:function(){x["goto"](g(),null,null,null,!0)},"goto":function(b,h,g,n,p){p=p||v;b.href||(b=r(A,l,b,h,g,n));if(!1===b.name)console.log("Could not find route");
else{h=null;for(g=0;g<m.length;g++)if(m[g].href===b.href){h=g;break}null===h&&(m.splice(c+1,1E4),m.push(b),h=m.length-1);b=m[c];g=m[h];n=!0;null!==c&&(n=(n=A[b.name].onexit)?n.apply(null,(b?[b.segs,b.query,b.hash]:[]).concat(g)):!0);if(!1!==n&&!1!==A[g.name].onenter.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(b))){if(d)history[p?"replaceState":"pushState"](null,"title",g.href);c=h}v=!1}},location:function(){return v?g():m[c]}},v=!0,A=b(x,n);u(A,l);window.onhashchange=window.onpopstate=function(b){(d||
"popstate"!=b.type)&&x["goto"](g(),null,null,null,!0)};p&&p();return x}})(domvm);
