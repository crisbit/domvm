/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(y){var w="function"==typeof HTMLElement,t=("undefined"==typeof window?{}:window).requestAnimationFrame,c={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,
zoom:!0},r={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!r.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&r.isFunc(b.then)},isElem:function(b){return w?b instanceof HTMLElement:!1},execAll:function(b,k,d,l,g,c){var p;b&&(r.isArr(b)?b:[b]).forEach(function(b){p=b.call(null,k,d,l,g,c)});return p},repaint:function(b){b&&
b.el&&b.el.offsetHeight},insertArr:function(b,k,d,l){b.splice.apply(b,[d,l].concat(k))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,k){switch(b){case "input":case "textarea":case "select":case "option":switch(k){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,k){return isNaN(k)||c[b]?k:k+"px"},cmpArr:function(b,k){var d=b.length;if(d!=k.length)return!1;
for(;d--;)if(b[d]!==k[d])return!1;return!0},deepSet:function(b,k,d,l,g,c){k=k.split(".");var p=k.pop();k.forEach(function(d){b[d]||(b[d]={});b=b[d]});if(r.isFunc(b[p]))b[p](d,l,g,c);else b[p]=d},deepGet:function(b,k){var d=k.split(".");do b=b[d.shift()];while(d.length);return b},keyedIdx:function(b,k,d,l,g){for(l=0;l<k.length;l++)if(g=k[l],g.key===b)if(d){if(g.vm&&g.vm.ident[0]===d)return l}else return l;return-1},raft:function(b){function k(){d=0;b.apply(l,g)}if(!t)return b;var d,l,g;return function(){l=
this;g=arguments;d||(d=t(k))}}};y.utils=r})(domvm);(function(y){function w(a){for(I.repaint&&m.repaint(a);a=J.shift();)a[0].apply(null,a.slice(1))}function t(a,f){return!1===f?null:null==f&&null!=a?a:m.isVal(f)||m.isObj(f)||m.isArr(f)||m.isFunc(f)?f:null}function c(a,f,h,d,A,e){function n(){var a=G(f);if(v===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==v[e])return v=a,!0;return!1}function D(a,f,e){if(e)a[f]=a[f]||[],a[f].push(e);else for(var h in f)a[h]=a[h]||[],a[h].push(f[h])}function g(a,f,h){A=a;e=f;q.update(h,!1);null!=q.node&&(q.node.idx=
e,A.body[e]=q.node);return x(0,!1)}function c(a){return null==a?"":a}function x(a,d){d=!1!==d;if(a){for(var z=q;a--&&z.parent;)z=z.parent;z.redraw(0,!0);return z.vm}(z=q.node)&&b(q,"willRedraw",q);var g=q.refs,D=q.body;q.refs={};q.body=[];var B=n()&&q.render.call(q.api,q,f,h),c;if(!1===B||(c=l(B,A,e,q,!0))&&F(z,c))return z.moved=!0,z.wasSame=!0,q.refs=g,q.body=D,q;c.vm=q;q.node=c;g=m.isVal(h)&&"^"===h[0]?h.substr(1):m.isVal(c.ref)&&"^"===c.ref[0]?c.ref.substr(1):null;c.key=null!=h?h:c.key;for(D=A;D;)D.vm&&
(q.parent||(q.parent=D.vm,D.vm.body.push(q)),null!==g&&m.deepSet(D.vm.refs,g,c)),D=D.parent;if((g=z)&&z.el&&(c.type!==z.type||c.tag!==z.tag))var g=null,P=!0,v=z.el.parentNode;u(c,g);A&&(A.body[e]=c);d&&(z&&k(z),!z&&E||p(c,null,c.el),P&&((v||c.parent.el).insertBefore(c.el,v.childNodes[z.idx]),q.node=c));z&&b(q,"didRedraw",q);d&&z&&J.length&&w(c);return q}var E=!A;m.isArr(a)&&(f=a[1],h=a[2],d=a[3],a=a[0]);h=t(f,h);var v=!0,G=function(a){return!0},q={api:{},node:null,ident:[a,h],model:f,opts:d||{},render:null,
update:function(a,e){null==a||h===f&&!m.isVal(h)||(b(q,"willUpdate",q,a),f=q.model=a);return!1!==e?x(0):q},on:function(a,f){D(q.events,a,f)},hook:function(a,f){q.hooks=q.hooks||{};D(q.hooks,a,f)},diff:function(a){G=a},events:{},hooks:null,redraw:I.debounce?m.raft(x):x,patch:function(a,f){var e=null!=a.el;if(m.isObj(f)){a.props=a.props||{};var h="class"in f?(c(a["class"])+" "+c(f["class"])).trim():a.props["class"],A="style"in f?f.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=h,e.style=
A,e={tag:a.tag,el:a.el,ns:a.ns,props:e},B(e,a));a.props["class"]=h;a.props.style=A}else h=a.parent,e=u(l(f,h,a.idx,q),a),h.body[a.idx]=e},emit:function(a){for(var f=Array.prototype.slice.call(arguments),e=q,h;e;){if(h=e.events[a]){f[0]=h;m.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,f){q.node||x(0);if(null==a)return q;var e=null;f&&(a.textContent="",e=a,a=null);p(q.node,e,null,a);w(q.node);return q},attach:function(a){q.node||x(0);r(q.node,a);return q},unmount:function(){k(q.node)},
moveTo:g};d&&d.hooks&&q.hook(d.hooks);m.execAll(H,q);q.render=a.call(q.api,q,f,h);return A?g(A,e):q}function r(a,f){a.el=f;f._node=a;for(var h in a.props){var b=a.props[h],A=m.isEvProp(h)?h:"."===h[0]?h.substr(1):null;null!==A&&(f[A]=b)}if(m.isArr(a.body))for(h=0;h<a.body.length;h++)r(a.body[h],f.childNodes[h])}function b(a,f,h,b,A,e){if(a&&a.hooks&&(a=a.hooks[f]))if("did"==f.substr(0,3))J.push([m.execAll,a,h,b,A,e]);else return m.execAll(a,h,b,A,e)}function k(a,f){var h=a.el&&!a.moved;if(h){var z=
b(a.vm,"willUnmount",a.vm),A=b(a,"willRemove",a),e=z||A;a.removed=!0}a.wasSame?a.wasSame=!1:(m.isArr(a.body)&&a.body.forEach(function(a,h){k(a,f||e)}),f||(e?e.then(function(){d(a,h,!0)}):d(a,h)));a.moved=!1}function d(a,f,h){null!=a.el&&a.el.parentNode?f&&(a.el.parentNode.removeChild(a.el),a.el=null,n(a),b(a.vm,"didUnmount",a.vm),b(a,"didRemove",a),h&&w(a.parent)):n(a)}function l(a,f,h,b,A){var e=a;a=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,
hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};m.isFunc(e)&&(e=e());var d=e.length;if(m.isArr(e)&&d){a.type=m.TYPE_ELEM;if(1<d){var c=1;!m.isObj(e[1])||e[1].redraw||m.isElem(e[1])||(a.props=e[1],c=2);a.body=d==c+1?m.isVal(e[c])?e[c]:m.isFunc(e[c])?e[c]():e.slice(c):e.slice(c)}e=e[0];d=M[e];d||(d=["",""],d={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||d)[1],"class":(e.match(/\.([-\w.]+)/)||d)[1].replace(/\./g,
" ")},M[e]=d);a.tag=d.tag;if(d.id||d["class"])e=a.props||{},d.id&&null==e.id&&(e.id=d.id),d["class"]&&(a["class"]=d["class"],e["class"]=d["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,l;for(l in e)!m.isEvProp(l)&&m.isFunc(e[l])&&("href"==l?(e.onclick=e[l],e.href=e[l].href):e[l]=e[l]()),m.isDynProp(a.tag,l)&&(e["."+l]=e[l]);if(m.isObj(e.style))for(var k in e.style)l=e.style[k],m.isFunc(l)&&(e.style[k]=l());a.key=m.isVal(e._key)?e._key:m.isVal(e._ref)?e._ref:m.isVal(e.id)?
e.id:m.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var n in e)"_"==n[0]&&(a[n.substr(1)]=e[n],delete e[n])}}else m.isVal(e)?(a.type=m.TYPE_TEXT,a.body=e):m.isElem(e)&&(a.type=m.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&m.deepSet(b.refs,a.ref,a);a.parent=f;a.idx=h;a.ns=f&&f.ns?f.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;A||a.diff||!m.isArr(a.body)||g(a,b);return a}function g(a,f){for(var h=0,d=a.body.length;h<d;h++){var b=a.body[h],e=null,c=null,n=!1,g=!1;m.isFunc(b)&&
(b=b());if(null==b)n=!0;else{var k=m.isArr(b),B=k?!1:m.isObj(b);if(k)b.length?b._expl?g=!0:"string"==typeof b[0]&&""!==b[0]?(c=l(b,a,h,f),e=c.key):m.isFunc(b[0])?e=t(b[1],b[2]):g=!0:n=!0;else if(B)if(m.isFunc(b.redraw))b.moveTo(a,h),c=b.node,e=b.ident[1];else if(m.isElem(b))c=l(b,a,h,f);else{a.body[h--]=""+b;continue}else""===b?n=!0:0<h&&a.body[h-1].type===m.TYPE_TEXT?(a.body[h-1].body+=""+b,n=!0):c=l(""+b,a,h,f)}n||g?(g?m.insertArr(a.body,b,h,1):a.body.splice(h,1),d=a.body.length,h--):(null!==e&&
(a.hasKeys=!0),a.body[h]=c||b)}a.body._init=!0}function u(a,f){if(F(f,a))return f.moved=!0,f.wasSame=!0,f;f&&(b(a,"willRecycle",f,a),x(f,a),b(a,"didRecycle",f,a));if(m.isArr(a.body)){if(!a.body._init){for(var h=a;!h.vm;)h=h.parent;g(a,h.vm)}var d=0;a.body.forEach(function(b,e){var h=m.isArr(b);if(f){var l=E(b,a,f,d);if(null!==l){var n=l[0],l=l[1];n===d&&d++;n=f.body[n];n.vm?h?2===l?n.vm.moveTo(a,e,b[1]):1===l&&c(b[0],b[1],b[2],b[3],a,e):b.vm&&2===l&&b.vm===n.vm&&n.vm.moveTo(a,e):a.body[e]=u(b,n);
return}}h?c(b[0],b[1],b[2],b[3],a,e):a.body[e]=u(b)})}return a}function p(a,f,h,d){for(var c=!a.el;h&&h._node.removed;)h=h.nextSibling;c&&a.vm&&b(a.vm,"willMount",a.vm);if(a.type==m.TYPE_ELEM)if(c&&(a.el=f||(a.ns?L.createElementNS(C[a.ns],a.tag):L.createElement(a.tag)),a.props&&B(a)),m.isArr(a.body)){f=0;for(var e=a.el.firstChild;f<a.body.length;f++)e=p(a.body[f],null,e)}else m.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:c&&(a.el.textContent=a.body));else a.type==m.TYPE_TEXT&&c&&(a.el=L.createTextNode(a.body));
a.el._node=a;f=a.parent;h!==a.el&&(d||f&&f.el)&&(f=c?"Insert":"Reinsert",b(a,"will"+f,a),(d||a.parent.el).insertBefore(a.el,h),b(a,"did"+f,a));c&&a.vm&&a.vm.hooks&&!a.moved&&b(a.vm,"didMount",a.vm);return h!==a.el?h:h.nextSibling}function E(a,f,b,d,c){var e=m.isArr(a),l=e?t(a[1],a[2]):a.key,n=b.hasKeys,g=f.hasKeys;b=b.body;f=f.body;if(null!==l&&n)return a=m.keyedIdx(l,b,e?a[0]:null),-1<a?[a,2]:null;d=d||0;if(d>b.length-1)return null;c=0===c?0:c||b.length-1;for(l=null;d<=c;d++)if(n=b[d],null!==n&&
n.el)if(e&&n.vm){if(n.vm.ident[0]===a[0]){if(n.vm.ident[1]===t(a[1],a[2]))return[d,2];!l&&g&&-1==m.keyedIdx(n.key,f,n.vm.ident[0])&&(l=[d,1])}}else if(a.type===n.type&&(a.type===m.TYPE_TEXT||null!==a.tag&&a.tag===n.tag)&&(null===n.key||!g||-1==m.keyedIdx(n.key,f,n.vm?n.vm.ident[0]:null)))return[d,1];return l}function F(a,f){if(a&&a.diff&&f.diff&&a.diff[0]===f.diff[0]){var b=a.diff.slice(1).concat(f.diff.slice(1));return!f.diff[0].apply(null,b)}return!1}function x(a,f){if(a.el)if(f.el=a.el,a.el=null,
f.el&&(f.el._node=f),f.type===m.TYPE_TEXT&&f.body!==a.body)f.el.nodeValue=f.body;else{B(f,a);var b=!m.isArr(f.body),d=!m.isArr(a.body);b&&f.body!==a.body?d&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:d&&!b&&(f.el.textContent="");a.moved=!0}}function n(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;K.push(a)}function G(a,f,b,d){return function(b){var e,h=b.target._node,
c=null;if(m.isFunc(a))e=a.call(f,b,h,d);else if(m.isArr(a))c=a.slice(1),e=a[0].apply(f,c.concat(b,h,d));else if(m.isObj(a))for(var n in a){var l=a[n];null!=l&&"_"!=n[0]&&b.target.matches(n)&&(m.isArr(l)?(c=l.slice(1),e=l[0].apply(f,c.concat(b,h,d))):m.isFunc(l)&&(e=l.call(f,b,h,d)))}!1===e&&(b.preventDefault(),b.stopPropagation());d.opts.hasOwnProperty("watch")&&d.opts.watch.fire({type:"event",vm:d,node:h,event:b,data:c})}}function B(a,f){var b=!f;f=f||{};if(f.props||a.props){var d=f.props||{},c=
a.props||{},e=d.style,n=c.style;if(m.isObj(e)||m.isObj(n))N(a.el,a.tag,e||{},n||{},Q,v,a.ns,b,a),d.style=c.style=null;N(a.el,a.tag,d,c,R,O,a.ns,b,a);n&&(c.style=n)}}function N(a,f,b,d,c,e,n,l,g){for(var k in d)if(f=d[k],null!==f){var B="."===k[0]?a[k.substr(1)]:b[k];f===B||m.isArr(f)&&m.isArr(B)&&m.cmpArr(f,B)||c(a,k,f,n,l,g)}for(k in b)null!==b[k]&&null==d[k]&&e(a,k,n,l)}function Q(a,b,d){a.style[b]=m.autoPx(b,d)}function v(a,b){a.style[b]=""}function R(a,b,d,c,n,e){if("class"===b)a.className=d;
else if("id"===b)a.id=d;else if("."===b[0])b=b.substr(1),"svg"===c?a[b].baseVal=d:a[b]=d;else if(m.isEvProp(b)){for(c=e;!c.vm;)c=c.parent;a[b]=G(d,c.vm.opts.evctx||c.vm.model||null,e,c.vm)}else!1===d?O(a,b,c,n):a.setAttribute(b,!0===d?"":d)}function O(a,b,d,c){c||("class"===b?a.className="":"id"===b?a.id="":"."===b[0]?(b=b.substr(1),"svg"===d?a[b].baseVal=null:a[b]=null):m.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var C={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
L="undefined"==typeof document?{}:document,M={},K=[],J=[],I={debounce:!0,repaint:!0};y.view=c;y.view.config=function(a){for(var b in a)I[b]=a[b]};var H=null;y.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var m=y.utils;return y})(domvm);(function(y){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=y.utils;y.html=function(c){c.render&&(c.node||c.mount(),c=c.node);var r="";switch(c.type){case t.TYPE_ELEM:r+="<"+c.tag;if(c.props){var b=t.isVal(c.props.style)?c.props.style:"",k=t.isObj(c.props.style)?c.props.style:null;if(k)for(var d in k)null!==k[d]&&(b+=t.camelDash(d)+": "+t.autoPx(d,k[d])+"; ");for(d in c.props)t.isEvProp(d)||"."===d[0]||(k=c.props[d],t.isFunc(k)&&(k=k()),t.isObj(k)||
(!0===k?r+=" "+d:!1!==k&&null!==k&&"."!==d[0]&&(r+=" "+d+'="'+k+'"')));b.length&&(r+=' style="'+b.trim()+'"')}if(c.ns&&"svg"!==c.tag&&"math"!==c.tag&&!c.body)return r+"/>";r+=">";break;case t.TYPE_TEXT:return c.body}w.test(c.tag)||(t.isArr(c.body)?c.body.forEach(function(b){r+=y.html(b)}):r+=c.body||"",r+="</"+c.tag+">");return r}})(domvm);(function(y){var w=y.utils;y.watch=function(t){function c(){}function r(b,c,g,u,p){p=p||{};p.method=b.toUpperCase();"credentials"in p||(p.credentials="same-origin");null!==g&&(w.isArr(g)||w.isObj(g)?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(g)):p.body=""+g);var E=u,F=function(b){return Promise.reject(b)};u instanceof Array&&(E=u[0],u[1]&&(F=u[1]));var x={type:"fetch",fetch:{method:b,url:c,body:g}};u=fetch(c,p).then(function(b){if(200<=
b.status&&300>b.status)return b;var d=Error(b.status+": "+b.statusText);d.data=b;return Promise.reject(d)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(E,F).then(function(b){!1!==b&&k.fire(x);return b},function(b){x.error=b;k.fire(x);return Promise.reject(b)});u._fetchArgs=[b,c,g,[E,F],p];return u}var b=[];w.isFunc(t)&&b.push(t);var k={on:function(d){b.push(d);return k},off:function(d){b.splice(b.indexOf(d),
1);return k},fire:w.raft(function(d){w.execAll(b,d);return k}),prop:function(b,l,g){var u=b,p=function(b,d,c){if(arguments.length&&b!==u){c=c||{type:"prop",prop:p,data:{old:u,"new":b}};g&&(b=g(c));if("undefined"==typeof b||b===u)return u;u=c.data["new"]=b;w.isFunc(d)?d(c):!1!==d&&k.fire(c)}return u};p._prop=!0;if(l&&l.then){p.update=c;if(l._fetchArgs){var E=l._fetchArgs[3];l._fetchArgs[3]=[function(b){return p(E[0]?E[0](b):b)},E[1]];p.update=function(){r.apply(null,l._fetchArgs)}}l.then(p)}return p.toString=
p},sync:function(b,c,g){var u=b,p=c;w.isFunc(u)||(u=function(c,l,k){if("string"==typeof b){var n,g;"e."==b.substr(0,2)?(n=c,g=b.substr(2)):(n=c.target,g=b)}return w.deepGet(n,g)});w.isArr(p)&&(p=function(b,d,g){var n=c[0],p=c[1];w.isFunc(p)&&(p=p(g.event,g.node,g.vm));var B=w.deepGet(n,p);b!==B&&(w.deepSet(n,p,b,d,g),w.isFunc(d)?d(g):!1!==d&&k.fire(g))});return function(b,d,c){var l={type:"sync",vm:c,node:d,event:b};p(u(b,d,c),g,l)}},fetch:r,get:function(b,c,g){g?b+=k.query(c):g=c;return r("get",
b,null,g)},"delete":function(b,c,g){g?b+=k.query(c):g=c;return r("delete",b,null,g)},post:function(b,c,g){return r("post",b,c,g)},put:function(b,c,g){return r("put",b,c,g)},patch:function(b,c,g){return r("patch",b,c,g)},query:function(b){if(!w.isObj(b))return"";var c=[],g=encodeURIComponent,k;for(k in b)c.push(g(k)+"="+g(b[k]));return c.length?"?"+c.join("&"):""}};return k}})(domvm);(function(y){function w(b,c,d,g,k,n){var l=null,B=null,r=null;if("/"==d[0]){r=d;B=!1;g={};n=r.split("#");c=n[0].split("?");l=c[0];n=n[1];c[1]&&(k={},c[1].split("&").map(function(b){b=b.split("=");k[b[0]]=null==b[1]?!0:b[1]}));var w,v;for(v in b){d=b[v];var t=d.path;if(w=l.match(d.regexPath)){B=v;-1!==t.indexOf(":")&&(g={},w.shift(),t.replace(/:([^\/]+)/g,function(b,c){g[c]=w.shift()}));break}}}else{B=d;d=b[B];var t=c+d.path,y=d.vars||{},r=-1!==t.indexOf(":")?l=t.replace(/:([^\/]+)/g,function(b,c){if((y[c]||
/^[^\/]+$/).test(g[c]))return g[c]+="";throw Error("Invalid value for route '"+t+"' segment '"+c+"': '"+g[c]+"'");}):l=t;if(k){var r=r+"?",C;for(C in k)r+=C+(!0!==k[C]?"="+k[C]:"")+"&";r=r.slice(0,-1)}r+=n?"#"+n:""}return{href:r,name:B,path:l,segs:g,hash:n,query:k}}function t(b,c){for(var d in b){var g=b[d];g.regexPath=new RegExp("^"+c+g.path.replace(/:([^\/]+)/g,function(b,c){var d=""+((g.vars||{})[c]||/[^\/]+/);return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var c=[],r=null,b=!1,k=null,
d=null,l=null,g="";y.route=function(u,p){function y(){var c=location,c=b?c.href.substr(c.origin.length):c.hash.substr(1)||"/";return w(n,g,c)}var F=null,x={href:function(c,d,k,l,r){var p=w(n,g,c,d,k,l);c=function(b){x["goto"](p,d,k,l,r);b.preventDefault()};c.href=(b?"":"#")+p.href;return c},config:function(c){(b=c.useHist)&&(g=c.root||"");k=c.willEnter||null;d=c.willExit||null;l=c.notFound||null;F=c.init||null},refresh:function(){x["goto"](y(),null,null,null,!0)},"goto":function(p,t,u,v,y,x){p.href||
(p=w(n,g,p,t,u,v));if(!1===p.name)l?l(p):console.log("Could not find route");else{t=null;for(v=0;v<c.length;v++)if(c[v].href===p.href){t=v;break}null===t&&(c.splice(r+1,1E4),c.push(p),t=c.length-1);p=c[r];v=c[t];var C=!0;u=!0;null!==r&&(d&&(C=x||d(p,v)),!1!==C&&(C=(C=n[p.name].onexit)?x||C.apply(null,(p?[p.segs,p.query,p.hash]:[]).concat(v)):!0));!1!==C&&(k&&(u=x||k(v,p)),!1!==u&&(u=n[v.name].onenter,u=x||u.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(p))),!1!==u&&(b?(G=!0,history[y?"replaceState":
"pushState"](null,"title",v.href)):(v="#"+v.href,location.hash!==v&&(G=!0,y?location.replace(v):location.hash=v)),r=t))}},route:function(b,d,g,k,l){if(null!=b)x["goto"](b,d,g,k,l,!0);else return null==r?y():c[r]}};x.location=x.route;var n=u(x,p);t(n,g);var G=!1;window.onhashchange=window.onpopstate=function(c){if(b||"popstate"!=c.type)!b&&G?G=!1:x["goto"](y(),null,null,null,!0)};F&&F();return x}})(domvm);
