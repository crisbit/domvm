/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(t){var v="undefined"==typeof window?{}:window,q={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},c={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!c.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&c.isFunc(b.then)},execAll:function(b,u){b&&(c.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,u)})},insertArr:function(b,c,l,f){b.splice.apply(b,[l,f].concat(c))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,c){switch(b){case "input":case "textarea":case "select":case "option":switch(c){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,c){return isNaN(c)||q[b]?c:c+"px"},deepSet:function(b,c,l){c=c.split(".");var f=c.pop();c.forEach(function(f){b[f]||(b[f]={});b=b[f]});b[f]=l},keyedIdx:function(b,c,l,f,m){for(f=0;f<c.length;f++)if(m=c[f],m.key===b)if(l){if(m.vm&&m.vm.view[0]===l)return f}else return f;return-1},raft:function(b){function c(){l=0;b.apply(f,m)}if(!v.requestAnimationFrame)return b;var l,f,m;return function(){f=this;m=arguments;
l||(l=v.requestAnimationFrame(c))}}};t.util=c})(domvm);(function(t){function v(a,d){return!1===d?null:null==d&&null!=a?a:h.isVal(d)||h.isObj(d)||h.isArr(d)||h.isFunc(d)?d:null}function q(a,d,n,D,e,g){function C(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var n in d)a[n]=a[n]||[],a[n].push(d[n])}function k(a,d,n){e=a;g=d;p.update(n,!1);return z(0,!1)}function z(a,D){if(a){for(var k=p;a--&&k.parent;)k=k.parent;k.redraw(0,!0);return k.vm}(k=p.node)&&p.hooks&&h.execAll(p.hooks.willRedraw,[p]);p.refs={};var c=p.render.call(p.api,p,d,n),c=l(c,e,g,p);c.vm=
p;p.node=c;var C=h.isVal(n)&&"^"===n[0]?n.substr(1):h.isVal(c.ref)&&"^"===c.ref[0]?c.ref.substr(1):null;c.key=null!=n?n:c.key;for(var z=e;z;)z.vm&&(p.parent||(p.parent=z.vm),null!==C&&h.deepSet(z.vm.refs,C,c)),z=z.parent;if((C=k)&&(c.type!==k.type||c.tag!==k.tag))var C=null,w=!0;f(c,C);e&&(e.body[g]=c);!1!==D&&(k&&b(k),!k&&x||m(c,null,c.el),w&&(k.el.parentNode.replaceChild(c.el,k.el),k.el=null));k&&p.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){h.execAll(p.hooks.didRedraw,
[p])})});return p}function y(a){p.hooks&&h.execAll(p.hooks.willUnmount);e&&(e.body[g]=null);b(p.node,!0);p.node.vm=null;p.hooks&&h.execAll(p.hooks.didUnmount)}var x=!e;h.isArr(a)&&(d=a[1],n=a[2],D=a[3],a=a[0]);n=v(d,n);var p={api:{},node:null,view:[a,n],model:d,opts:D||{},render:null,update:function(a,e){null==a||n===d&&!h.isVal(n)||(d=p.model=a);return!1!==e?z(0):p},on:function(a,d){C(p.events,a,d)},hook:function(a,d){p.hooks=p.hooks||{};C(p.hooks,a,d)},events:{},hooks:null,redraw:L.useRaf?h.raft(z):
z,patch:function(a,d){if(h.isObj(d)){var e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":"class"in d?(null!=a["class"]?a["class"]+" ":"")+d["class"]:a.props["class"],style:"style"in d?d.style:a.props.style}};w(e,a);a.props["class"]=e.props["class"];a.props.style=e.props.style}else{var n=a.parent,e=f(l(d,n,a.idx,p),a);n.body[a.idx]=e}},emit:function(a){for(var d=Array.prototype.slice.call(arguments,1),e=p;e;){if(e.events[a]){h.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,
d){var e=null;d&&(a.textContent="",e=a,a=null);m(p.node,e,null,a);return p},attach:function(a){c(p.node,a);return p},unmount:function(){A(p.hooks,"Unmount",y,[],[p])},moveTo:k,updIdx:function(a){g=a}};D&&D.hooks&&p.hook(D.hooks);h.execAll(G,[p]);p.render=a.call(p.api,p,d,n);return e?k(e,g):z(0)}function c(a,d){a.el=d;d._node=a;for(var n in a.props){var b=a.props[n],e=h.isEvProp(n)?n:"."===n[0]?n.substr(1):null;null!==e&&(d[e]=b)}if(h.isArr(a.body))for(n=0;n<a.body.length;n++)c(a.body[n],d.childNodes[n])}
function b(a,d){h.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,a.hooks?A(a.hooks,"Remove",u,[a]):u(a))}function u(a){a.el.parentNode.removeChild(a.el);a.el=null}function l(a,d,n,b){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};h.isFunc(e)&&(e=e());if(h.isArr(e)&&
e.length){a.type=h.TYPE_ELEM;if(1<e.length){var f=1;h.isObj(e[1])&&(a.props=e[1],f=2);a.body=e.length==f+1?h.isVal(e[f])?e[f]:h.isFunc(e[f])?e[f]():e.slice(f):e.slice(f)}e=e[0];if(/[.#]/.test(e)){if(e=B(e),a.tag=e.tag,f=null!=e["class"],null!=e.id||f){var c=a.props||{};null==c.id&&(c.id=e.id);f&&(a["class"]=e["class"],c["class"]=e["class"]+(null!=c["class"]?" "+c["class"]:""));a.props=c}}else a.tag=e;if(a.props){var e=a.props,k;for(k in e)h.isEvProp(k)?e[k]=y(e[k],b.opts.evctx||b.model||null,a,b):
h.isFunc(e[k])&&("href"==k?(e.onclick=e[k],e.href=e[k].href):e[k]=e[k]()),h.isDynProp(a.tag,k)&&(e["."+k]=e[k]);if(h.isObj(e.style))for(var g in e.style)k=e.style[g],h.isFunc(k)&&(e.style[g]=k());h.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=h.isVal(e._key)?e._key:h.isVal(e._ref)?e._ref:h.isVal(e.id)?e.id:h.isVal(e.name)?e.name:null;null!=e._ref&&(a.ref=e._ref);e._raw&&(a.raw=!0);null!=e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else h.isVal(e)&&
(a.type=h.TYPE_TEXT,a.body=e);null!==a.ref&&h.deepSet(b.refs,a.ref,a);a.parent=d;a.idx=n;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(h.isArr(a.body))for(d=0,n=a.body.length;d<n;d++){g=a.body[d];e=k=null;c=f=!1;h.isFunc(g)&&(g=g());if(null==g)f=!0;else{var m=h.isArr(g),w=m?!1:h.isObj(g);if(m)g.length?h.isArr(g[0])?c=!0:h.isFunc(g[0])?k=v(g[1],g[2]):(e=l(g,a,d,b),k=e.key):f=!0;else if(w)if(h.isFunc(g.redraw))g.moveTo(a,d),e=g.node,k=g.view[1];else{a.body[d--]=""+g;continue}else""===
g?f=!0:0<d&&a.body[d-1].type===h.TYPE_TEXT?(a.body[d-1].body+=""+g,f=!0):e=l(""+g,a,d,b)}f||c?(c?h.insertArr(a.body,g,d,1):a.body.splice(d,1),n=a.body.length,d--):(null!==k&&(a.hasKeys=!0),a.body[d]=e||g)}return a}function f(a,d){d&&(a.hooks?A(a.hooks,"Recycle",r,[d,a]):r(d,a));if(h.isArr(a.body)){var n=0;a.body.forEach(function(b,e){var c=h.isArr(b);if(d){var g=x(b,a,d,n);if(null!==g){var k=g[0],g=g[1];k===n&&n++;k=d.body[k];k.vm?c?2===g?k.vm.moveTo(a,e,b[1]):1===g&&q(b[0],b[1],b[2],b[3],a,e):b.vm&&
2===g&&b.vm===k.vm&&k.vm.moveTo(a,e):a.body[e]=f(b,k);return}}c?q(b[0],b[1],b[2],b[3],a,e):a.body[e]=f(b)})}return a}function m(a,d,b,f){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&a.vm&&a.vm.hooks&&h.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==h.TYPE_ELEM)if(e&&(a.el=d||(a.ns?I.createElementNS(E[a.ns],a.tag):I.createElement(a.tag)),a.props&&w(a)),h.isArr(a.body)){d=0;for(var c=a.el.firstChild;d<a.body.length;d++)c=m(a.body[d],null,c)}else h.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:
e&&(a.el.textContent=a.body));else a.type==h.TYPE_TEXT&&e&&(a.el=I.createTextNode(a.body));a.el._node=a;d=a.parent;b!==a.el&&(f||d&&d.el)&&(a.hooks?A(a.hooks,e?"Insert":"Reinsert",g,[a,b,f]):g(a,b,f));e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){!a.moved&&h.execAll(a.vm.hooks.didMount,[a.vm])});return b!==a.el?b:b.nextSibling}function g(a,d,b){(b||a.parent.el).insertBefore(a.el,d)}function x(a,d,b,f,e){var c=h.isArr(a),g=c?v(a[1],a[2]):a.key,k=b.hasKeys,m=d.hasKeys;b=b.body;d=d.body;if(null!==
g&&k)return a=h.keyedIdx(g,b,c?a[0]:null),-1<a?[a,2]:null;f=f||0;if(f>b.length-1)return null;e=0===e?0:e||b.length-1;for(g=null;f<=e;f++)if(k=b[f],null!==k&&k.el)if(c&&k.vm){if(k.vm.view[0]===a[0]){if(k.vm.view[1]===v(a[1],a[2]))return[f,2];!g&&m&&-1==h.keyedIdx(k.key,d,k.vm.view[0])&&(g=[f,1])}}else if(a.type===k.type&&(a.type===h.TYPE_TEXT||null!==a.tag&&a.tag===k.tag)&&(null===k.key||!m||-1==h.keyedIdx(k.key,d,k.vm?k.vm.view[0]:null)))return[f,1];return g}function r(a,d){d.el=a.el;a.el=null;d.el&&
(d.el._node=d);if(d.type===h.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{w(d,a);var b=!h.isArr(d.body),f=!h.isArr(a.body);b&&d.body!==a.body?f&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:f&&!b&&(d.el.textContent="");a.moved=!0}}function A(a,d,b,f,e,g){if(a){var c=a["will"+d];h.isArr(c)&&(c=c[0]);var k=a["did"+d];h.isArr(k)&&(k=k[0]);a=function(){b.apply(null,f);k&&k.apply(null,g||e||f)};c?(c=c.apply(null,e||f),h.isProm(c)?c.then(a):
a()):a()}else b.apply(null,f)}function B(a){if(a in J)return J[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,f){e&&(d.id=e);f&&(d["class"]=f.replace(/\./g," ").trim());return b||"div"});return J[a]=d}function y(a,d,b,f){return function(e){var b,c=e.target._node,g=null;if(h.isFunc(a))b=a.call(d,e,c,f);else if(h.isArr(a))g=a.slice(1),b=a[0].apply(d,g.concat(e,c,f));else if(h.isObj(a))for(var m in a){var n=a[m];e.target.matches(m)&&
(h.isArr(n)?(g=n.slice(1),b=n[0].apply(d,g.concat(e,c,f))):h.isFunc(n)&&(b=n.call(d,e,c,f)))}!1===b&&(e.preventDefault(),e.stopPropagation());f.opts.hasOwnProperty("watch")&&f.opts.watch.fire({type:"event",vm:f,node:c,event:e,data:g})}}function w(a,d){var b=!d;d=d||{};if(d.props||a.props){var f=d.props||{},e=a.props||{},c=f.style,g=e.style;if(h.isObj(c)||h.isObj(g))F(a.el,a.tag,c||{},g||{},M,N,a.ns,b),f.style=e.style=null;F(a.el,a.tag,f,e,K,H,a.ns,b);g&&(e.style=g)}}function F(a,d,b,f,e,c,g,h){for(var m in f)null!==
f[m]&&("."===m[0]?a[m.substr(1)]!==f[m]:f[m]!==b[m])&&e(a,m,f[m],g,h);for(m in b)null!==b[m]&&null==f[m]&&c(a,m,g,h)}function M(a,d,b){a.style[d]=h.autoPx(d,b)}function N(a,d){a.style[d]=""}function K(a,d,b,f,e){"."===d[0]?(d=d.substr(1),"svg"===f?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||h.isEvProp(d)?a[d]=b:!1===b?H(a,d,f,e):a.setAttribute(d,!0===b?"":b)}function H(a,d,b,f){f||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||
h.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},J={},I="undefined"==typeof document?{}:document,L={useRaf:!0};t.view=q;t.view.config=function(a){L=a};var G=null;t.view.extend=function(a,d){G=!G||d?[]:G;G.push(a)};var h=t.util;return t})(domvm);(function(t){var v=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,q=t.util;t.html=function(c){var b="";switch(c.type){case q.TYPE_ELEM:b+="<"+c.tag;if(c.props){var u=q.isVal(c.props.style)?c.props.style:"",l=q.isObj(c.props.style)?c.props.style:null;if(l)for(var f in l)null!==l[f]&&(u+=q.camelDash(f)+": "+q.autoPx(f,l[f])+"; ");for(f in c.props)q.isEvProp(f)||"."===f[0]||(l=c.props[f],q.isFunc(l)&&(l=l()),q.isObj(l)||(!0===l?b+=" "+f:!1!==l&&null!==l&&
"."!==f[0]&&(b+=" "+f+'="'+l+'"')));u.length&&(b+=' style="'+u.trim()+'"')}if(c.ns&&"svg"!==c.tag&&"math"!==c.tag&&!c.body)return b+"/>";b+=">";break;case q.TYPE_TEXT:return c.body}v.test(c.tag)||(q.isArr(c.body)?c.body.forEach(function(f){b+=t.html(f)}):b+=c.body||"",b+="</"+c.tag+">");return b}})(domvm);(function(t){var v=t.util;t.watch=function(q){function c(){}function b(b,m,g,x,r){r=r||{};r.method=b.toUpperCase();null!==g&&(v.isArr(g)||v.isObj(g)?(r.headers=r.headers||new Headers,r.headers.set("Content-Type","application/json"),r.body=JSON.stringify(g)):r.body=""+g);var A=x,B=c;x instanceof Array&&(A=x[0],x[1]&&(B=x[1]));var y={type:"fetch",fetch:{method:b,url:m,body:g}};x=fetch(m,r).then(function(b){if(200<=b.status&&300>b.status)return b;var f=Error(b.status+": "+b.statusText);f.data=b;return Promise.reject(f)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(A,B).then(function(b){!1!==b&&l.fire(y);return b},function(b){y.error=b;l.fire(y);return b});x._fetchArgs=[b,m,g,[A,B],r];return x}var u=[];v.isFunc(q)&&u.push(q);var l={on:function(b){u.push(b);return l},off:function(b){u.splice(u.indexOf(b),1);return l},fire:v.raft(function(){v.execAll(u,arguments);return l}),prop:function(f,m){var g=f,x=function(b,f){if(arguments.length&&b!==g){var c=g;g=b;!1!==f&&l.fire({type:"prop",prop:x,data:{old:c,
"new":b}})}return g};if(m&&m.then){x.update=c;if(m._fetchArgs){var r=m._fetchArgs[3];m._fetchArgs[3]=[function(b){return x(r[0]?r[0](b):b)},r[1]];x.update=function(){b.apply(null,m._fetchArgs)}}m.then(x)}return x.toString=x},sync:function(b,c,g){var l=b,r=c;"string"==typeof b&&(l=function(c){return"e."===b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,f,y){var w=this!==window?this:null;w&&"string"==typeof c&&(r=function(b,f){var g=w[c];w[c]=b;q&&b!==g&&!1!==f&&q()});r(l(b),g)}},fetch:b,
get:function(f,c,g){g?f+=l.query(c):g=c;return b("get",f,null,g)},"delete":function(f,c,g){g?f+=l.query(c):g=c;return b("delete",f,null,g)},post:function(f,c,g){return b("post",f,c,g)},put:function(f,c,g){return b("put",f,c,g)},patch:function(f,c,g){return b("patch",f,c,g)},query:function(b){if(!v.isObj(b))return"";var c=[],g=encodeURIComponent,l;for(l in b)c.push(g(l)+"="+g(b[l]));return c.length?"?"+c.join("&"):""}};return l}})(domvm);(function(t){function v(b,c,g,l,r,q){var u=null,y=null,w=null;if("/"==g[0]){w=g;y=!1;l={};q=w.split("#");c=q[0].split("?");u=c[0];q=q[1];c[1]&&(r={},c[1].split("&").map(function(b){b=b.split("=");r[b[0]]=null==b[1]?!0:b[1]}));var F,v;for(v in b){g=b[v];var t=g.path;if(F=u.match(g.regexPath)){y=v;-1!==t.indexOf(":")&&(l={},F.shift(),t.replace(/:([^\/]+)/g,function(b,c){l[c]=F.shift()}));break}}}else{y=g;g=b[y];var t=c+g.path,K=g.vars||{},H=/^[^\/]+$/,w=-1!==t.indexOf(":")?u=t.replace(/:([^\/]+)/g,
function(b,c){if((K[c]||H).test(l[c]))return l[c]+="";throw Error("Invalid value for route '"+t+"' segment '"+c+"': '"+l[c]+"'");}):u=t;if(r){var w=w+"?",E;for(E in r)w+=E+(!0!==r[E]?"="+r[E]:"")+"&";w=w.slice(0,-1)}w+=q?"#"+q:""}return{href:w,name:y,path:u,segs:l,hash:q,query:r}}function q(b,c){for(var g in b){var l=b[g];l.regexPath=new RegExp("^"+c+l.path.replace(/:([^\/]+)/g,function(b,c){var f=""+l.vars[c];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var c=[],b=null,u=!1,l="";t.route=
function(f,m){function g(){var b=location,b=u?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return v(B,l,b)}var t=null,r={href:function(b,c,f,g,m){var q=v(B,l,b,c,f,g);return u?(b=function(b){r["goto"](q,null,null,null,m);b.preventDefault()},b.href=q.href,b):"#"+q.href},config:function(b){(u=b.useHist)&&(l=b.root||"");t=b.init||null},refresh:function(){r["goto"](g(),null,null,null,!0)},"goto":function(f,g,m,q,r){r=r||A;f.href||(f=v(B,l,f,g,m,q));if(!1===f.name)console.log("Could not find route");
else{g=null;for(m=0;m<c.length;m++)if(c[m].href===f.href){g=m;break}null===g&&(c.splice(b+1,1E4),c.push(f),g=c.length-1);f=c[b];m=c[g];q=!0;null!==b&&(q=(q=B[f.name].onexit)?q.apply(null,(f?[f.segs,f.query,f.hash]:[]).concat(m)):!0);if(!1!==q&&!1!==B[m.name].onenter.apply(null,(m?[m.segs,m.query,m.hash]:[]).concat(f))){if(u)history[r?"replaceState":"pushState"](null,"title",m.href);b=g}A=!1}},location:function(){return A?g():c[b]}},A=!0,B=f(r,m);q(B,l);window.onhashchange=window.onpopstate=function(b){(u||
"popstate"!=b.type)&&r["goto"](g(),null,null,null,!0)};t&&t();return r}})(domvm);
