/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(x){var u="function"==typeof HTMLElement,w=("undefined"==typeof window?{}:window).requestAnimationFrame,d={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,
zoom:!0},t={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!t.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&t.isFunc(b.then)},isElem:function(b){return u&&b instanceof HTMLElement},execAll:function(b,g,c,n,l,d){var p;b&&(t.isArr(b)?b:[b]).forEach(function(b){p=b.call(null,g,c,n,l,d)});return p},repaint:function(b){b&&
b.el&&b.el.offsetHeight},insertArr:function(b,g,c,n){b.splice.apply(b,[c,n].concat(g))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,g){switch(b){case "input":case "textarea":case "select":case "option":switch(g){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,g){return isNaN(g)||d[b]?g:g+"px"},cmpArr:function(b,g){var c=b.length;if(c!=g.length)return!1;
for(;c--;)if(b[c]!==g[c])return!1;return!0},deepSet:function(b,g,c,n,l,d){g=g.split(".");var p=g.pop();g.forEach(function(c){b[c]||(b[c]={});b=b[c]});if(t.isFunc(b[p]))b[p](c,n,l,d);else b[p]=c},deepGet:function(b,g){var c=g.split(".");do b=b[c.shift()];while(c.length);return b},keyedIdx:function(b,g,c,n,l){for(n=0;n<g.length;n++)if(l=g[n],l.key===b)if(c){if(l.vm&&l.vm.ident[0]===c)return n}else return n;return-1},raft:function(b){function g(){c=0;b.apply(n,l)}if(!w)return b;var c,n,l;return function(){n=
this;l=arguments;c||(c=w(g))}}};x.utils=t})(domvm);(function(x){function u(a){for(J.repaint&&m.repaint(a);a=K.shift();)a[0].apply(null,a.slice(1))}function w(a,f){return!1===f?null:null==f&&null!=a?a:m.isVal(f)||m.isObj(f)||m.isArr(f)||m.isFunc(f)?f:null}function d(a,f,k,c,A,e){function B(){var a=E(f);if(v===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==v[e])return v=a,!0;return!1}function G(a,f,e){if(e)a[f]=a[f]||[],a[f].push(e);else for(var k in f)a[k]=a[k]||[],a[k].push(f[k])}function l(a,f,k){A=a;e=f;q.update(k,!1);null!=q.node&&(q.node.idx=
e,A.body[e]=q.node);return y(0,!1)}function d(a){return null==a?"":a}function y(a,c){c=!1!==c;if(a){for(var z=q;a--&&z.parent;)z=z.parent;z.redraw(0,!0);return z.vm}(z=q.node)&&b(q,"willRedraw",q);var l=q.refs,d=q.body;q.refs={};q.body=[];var G=B()&&q.render.call(q.api,q,f,k),h;if(!1===G||(h=n(G,A,e,q,!0))&&D(z,h))return z.moved=!0,z.wasSame=!0,q.refs=l,q.body=d,q;h.vm=q;q.node=h;l=m.isVal(k)&&"^"===k[0]?k.substr(1):m.isVal(h.ref)&&"^"===h.ref[0]?h.ref.substr(1):null;h.key=null!=k?k:h.key;for(d=A;d;)d.vm&&
(q.parent||(q.parent=d.vm,d.vm.body.push(q)),null!==l&&m.deepSet(d.vm.refs,l,h)),d=d.parent;if((l=z)&&z.el&&(h.type!==z.type||h.tag!==z.tag))var l=null,P=!0,v=z.el.parentNode;r(h,l);A&&(A.body[e]=h);c&&(z&&g(z),!z&&C||p(h,null,h.el),P&&((v||h.parent.el).insertBefore(h.el,v.childNodes[z.idx]),q.node=h));z&&b(q,"didRedraw",q);c&&z&&K.length&&u(h);return q}var C=!A;m.isArr(a)&&(f=a[1],k=a[2],c=a[3],a=a[0]);k=w(f,k);var v=!0,E=function(a){return!0},q={api:{},node:null,ident:[a,k],model:f,opts:c||{},render:null,
update:function(a,e){null==a||k===f&&!m.isVal(k)||(b(q,"willUpdate",q,a),f=q.model=a);return!1!==e?y(0):q},on:function(a,f){G(q.events,a,f)},hook:function(a,f){q.hooks=q.hooks||{};G(q.hooks,a,f)},diff:function(a){E=a},events:{},hooks:null,redraw:J.debounce?m.raft(y):y,patch:function(a,f){var e=null!=a.el;if(m.isObj(f)){a.props=a.props||{};var k="class"in f?(d(a["class"])+" "+d(f["class"])).trim():a.props["class"],A="style"in f?f.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=k,e.style=
A,e={tag:a.tag,el:a.el,ns:a.ns,props:e},h(e,a));a.props["class"]=k;a.props.style=A}else k=a.parent,e=r(n(f,k,a.idx,q),a),k.body[a.idx]=e},emit:function(a){for(var f=Array.prototype.slice.call(arguments),e=q,k;e;){if(k=e.events[a]){f[0]=k;m.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,f){q.node||y(0);if(null==a)return q;var e=null;f&&(a.textContent="",e=a,a=null);p(q.node,e,null,a);u(q.node);return q},attach:function(a){q.node||y(0);t(q.node,a);return q},unmount:function(){g(q.node)},
moveTo:l};c&&c.hooks&&q.hook(c.hooks);m.execAll(H,q);q.render=a.call(q.api,q,f,k);return A?l(A,e):q}function t(a,f){a.el=f;f._node=a;for(var k in a.props){var b=a.props[k],A=m.isEvProp(k)?k:"."===k[0]?k.substr(1):null;null!==A&&(f[A]=b)}if(m.isArr(a.body))for(k=0;k<a.body.length;k++)t(a.body[k],f.childNodes[k])}function b(a,f,k,b,A,e){if(a&&a.hooks&&(a=a.hooks[f]))if("did"==f.substr(0,3))K.push([m.execAll,a,k,b,A,e]);else return m.execAll(a,k,b,A,e)}function g(a,f){var k=a.el&&!a.moved;if(k){var z=
b(a.vm,"willUnmount",a.vm),A=b(a,"willRemove",a),e=z||A;a.removed=!0}a.wasSame?a.wasSame=!1:(m.isArr(a.body)&&a.body.forEach(function(a,k){g(a,f||e)}),f||(e?e.then(function(){c(a,k,!0)}):c(a,k)));a.moved=!1}function c(a,f,k){null!=a.el&&a.el.parentNode?f&&(a.el.parentNode.removeChild(a.el),a.el=null,B(a),b(a.vm,"didUnmount",a.vm),b(a,"didRemove",a),k&&u(a.parent)):B(a)}function n(a,f,k,b,A){var e=a;a=0<L.length?L.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,
hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};m.isFunc(e)&&(e=e());var c=e.length;if(m.isArr(e)&&c){a.type=m.TYPE_ELEM;if(1<c){var h=1;!m.isObj(e[1])||e[1].redraw||m.isElem(e[1])||(a.props=e[1],h=2);a.body=c==h+1?m.isVal(e[h])?e[h]:m.isFunc(e[h])?e[h]():e.slice(h):e.slice(h)}e=e[0];c=N[e];c||(c=["",""],c={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||c)[1],"class":(e.match(/\.([-\w.]+)/)||c)[1].replace(/\./g,
" ")},N[e]=c);a.tag=c.tag;if(c.id||c["class"])e=a.props||{},c.id&&null==e.id&&(e.id=c.id),c["class"]&&(a["class"]=c["class"],e["class"]=c["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,d;for(d in e)!m.isEvProp(d)&&m.isFunc(e[d])&&("href"==d?(e.onclick=e[d],e.href=e[d].href):e[d]=e[d]()),m.isDynProp(a.tag,d)&&(e["."+d]=e[d]);if(m.isObj(e.style))for(var n in e.style)d=e.style[n],m.isFunc(d)&&(e.style[n]=d());a.key=m.isVal(e._key)?e._key:m.isVal(e._ref)?e._ref:m.isVal(e.id)?
e.id:m.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var g in e)"_"==g[0]&&(a[g.substr(1)]=e[g],delete e[g])}}else m.isVal(e)?(a.type=m.TYPE_TEXT,a.body=e):m.isElem(e)&&(a.type=m.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&m.deepSet(b.refs,a.ref,a);a.parent=f;a.idx=k;a.ns=f&&f.ns?f.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;A||a.diff||!m.isArr(a.body)||l(a,b);return a}function l(a,f){for(var k=0,c=a.body.length;k<c;k++){var b=a.body[k],e=null,h=null,d=!1,g=!1;m.isFunc(b)&&
(b=b());if(null==b)d=!0;else{var l=m.isArr(b),B=l?!1:m.isObj(b);if(l)b.length?b._expl?g=!0:"string"==typeof b[0]&&""!==b[0]?(h=n(b,a,k,f),e=h.key):m.isFunc(b[0])?e=w(b[1],b[2]):g=!0:d=!0;else if(B)if(m.isFunc(b.redraw))b.moveTo(a,k),h=b.node,e=b.ident[1];else if(m.isElem(b))h=n(b,a,k,f);else{a.body[k--]=""+b;continue}else""===b?d=!0:0<k&&a.body[k-1].type===m.TYPE_TEXT?(a.body[k-1].body+=""+b,d=!0):h=n(""+b,a,k,f)}d||g?(g?m.insertArr(a.body,b,k,1):a.body.splice(k,1),c=a.body.length,k--):(null!==e&&
(a.hasKeys=!0),a.body[k]=h||b)}a.body._init=!0}function r(a,f){if(D(f,a))return f.moved=!0,f.wasSame=!0,f;f&&(b(a,"willRecycle",f,a),y(f,a),b(a,"didRecycle",f,a));if(m.isArr(a.body)){if(!a.body._init){for(var k=a;!k.vm;)k=k.parent;l(a,k.vm)}var c=0;a.body.forEach(function(b,e){var k=m.isArr(b);if(f){var h=C(b,a,f,c);if(null!==h){var g=h[0],h=h[1];g===c&&c++;g=f.body[g];g.vm?k?2===h?g.vm.moveTo(a,e,b[1]):1===h&&d(b[0],b[1],b[2],b[3],a,e):b.vm&&2===h&&b.vm===g.vm&&g.vm.moveTo(a,e):a.body[e]=r(b,g);
return}}k?d(b[0],b[1],b[2],b[3],a,e):a.body[e]=r(b)})}return a}function p(a,f,k,c){for(var d=!a.el;k&&k._node.removed;)k=k.nextSibling;d&&a.vm&&b(a.vm,"willMount",a.vm);if(a.type==m.TYPE_ELEM)if(d&&(a.el=f||(a.ns?M.createElementNS(F[a.ns],a.tag):M.createElement(a.tag)),a.props&&h(a)),m.isArr(a.body)){f=0;for(var e=a.el.firstChild;f<a.body.length;f++)e=p(a.body[f],null,e)}else m.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:d&&(a.el.textContent=a.body));else a.type==m.TYPE_TEXT&&d&&(a.el=M.createTextNode(a.body));
a.el._node=a;f=a.parent;k!==a.el&&(c||f&&f.el)&&(f=d?"Insert":"Reinsert",b(a,"will"+f,a),(c||a.parent.el).insertBefore(a.el,k),b(a,"did"+f,a));d&&a.vm&&a.vm.hooks&&!a.moved&&b(a.vm,"didMount",a.vm);return k!==a.el?k:k.nextSibling}function C(a,f,b,c,h){var e=m.isArr(a),d=e?w(a[1],a[2]):a.key,g=b.hasKeys,l=f.hasKeys;b=b.body;f=f.body;if(null!==d&&g)return a=m.keyedIdx(d,b,e?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;h=0===h?0:h||b.length-1;for(d=null;c<=h;c++)if(g=b[c],null!==g&&
g.el)if(e&&g.vm){if(g.vm.ident[0]===a[0]){if(g.vm.ident[1]===w(a[1],a[2]))return[c,2];!d&&l&&-1==m.keyedIdx(g.key,f,g.vm.ident[0])&&(d=[c,1])}}else if(a.type===g.type&&(a.type===m.TYPE_TEXT||null!==a.tag&&a.tag===g.tag)&&(null===g.key||!l||-1==m.keyedIdx(g.key,f,g.vm?g.vm.ident[0]:null)))return[c,1];return d}function D(a,f){if(a&&a.diff&&f.diff&&a.diff[0]===f.diff[0]){var b=a.diff.slice(1).concat(f.diff.slice(1));return!f.diff[0].apply(null,b)}return!1}function y(a,f){if(a.el)if(f.el=a.el,a.el=null,
f.el&&(f.el._node=f),f.type===m.TYPE_TEXT&&f.body!==a.body)f.el.nodeValue=f.body;else{h(f,a);var b=!m.isArr(f.body),c=!m.isArr(a.body);b&&f.body!==a.body?c&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:c&&!b&&(f.el.textContent="");a.moved=!0}}function B(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;L.push(a)}function E(a,f,b,c){return function(b){var e,k=b.target._node,
h=null;if(m.isFunc(a))e=a.call(f,b,k,c);else if(m.isArr(a))h=a.slice(1),e=a[0].apply(f,h.concat(b,k,c));else if(m.isObj(a))for(var d in a){var g=a[d];null!=g&&"_"!=d[0]&&b.target.matches(d)&&(m.isArr(g)?(h=g.slice(1),e=g[0].apply(f,h.concat(b,k,c))):m.isFunc(g)&&(e=g.call(f,b,k,c)))}!1===e&&(b.preventDefault(),b.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:k,event:b,data:h})}}function h(a,f){var b=!f;f=f||{};if(f.props||a.props){var c=f.props||{},h=
a.props||{},e=c.style,d=h.style;if(m.isObj(e)||m.isObj(d))O(a.el,a.tag,e||{},d||{},Q,v,a.ns,b,a),c.style=h.style=null;O(a.el,a.tag,c,h,R,I,a.ns,b,a);d&&(h.style=d)}}function O(a,f,b,c,h,e,d,g,l){for(var n in c)if(f=c[n],null!==f){var B="."===n[0]?a[n.substr(1)]:b[n];f===B||m.isArr(f)&&m.isArr(B)&&m.cmpArr(f,B)||h(a,n,f,d,g,l)}for(n in b)null!==b[n]&&null==c[n]&&e(a,n,d,g)}function Q(a,b,c){a.style[b]=m.autoPx(b,c)}function v(a,b){a.style[b]=""}function R(a,b,c,h,d,e){if("class"===b)a.className=c;
else if("id"===b)a.id=c;else if("."===b[0])b=b.substr(1),"svg"===h?a[b].baseVal=c:a[b]=c;else if(m.isEvProp(b)){for(h=e;!h.vm;)h=h.parent;a[b]=E(c,h.vm.opts.evctx||h.vm.model||null,e,h.vm)}else!1===c?I(a,b,h,d):a.setAttribute(b,!0===c?"":c)}function I(a,b,c,h){h||("class"===b?a.className="":"id"===b?a.id="":"."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):m.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var F={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
M="undefined"==typeof document?{}:document,N={},L=[],K=[],J={debounce:!0,repaint:!0};x.view=d;x.view.config=function(a){for(var b in a)J[b]=a[b]};var H=null;x.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var m=x.utils;return x})(domvm);(function(x){var u=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,w=x.utils;x.html=function(d){d.render&&(d.node||d.mount(),d=d.node);var t="";switch(d.type){case w.TYPE_ELEM:if(null==d.body&&d.el)return d.el.outerHTML;t+="<"+d.tag;if(d.props){var b=w.isVal(d.props.style)?d.props.style:"",g=w.isObj(d.props.style)?d.props.style:null;if(g)for(var c in g)null!==g[c]&&(b+=w.camelDash(c)+": "+w.autoPx(c,g[c])+"; ");for(c in d.props)w.isEvProp(c)||"."===c[0]||
(g=d.props[c],w.isFunc(g)&&(g=g()),w.isObj(g)||(!0===g?t+=" "+c:!1!==g&&null!==g&&"."!==c[0]&&(t+=" "+c+'="'+g+'"')));b.length&&(t+=' style="'+b.trim()+'"')}if(d.ns&&"svg"!==d.tag&&"math"!==d.tag&&!d.body)return t+"/>";t+=">";break;case w.TYPE_TEXT:return d.body}u.test(d.tag)||(w.isArr(d.body)?d.body.forEach(function(b){t+=x.html(b)}):t+=d.body||"",t+="</"+d.tag+">");return t}})(domvm);(function(x){var u=x.utils;x.watch=function(w){function d(){}function t(b,d,l,r,p){p=p||{};p.method=b.toUpperCase();"credentials"in p||(p.credentials="same-origin");null!==l&&(u.isArr(l)||u.isObj(l)?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(l)):p.body=""+l);var C=r,D=function(b){return Promise.reject(b)};r instanceof Array&&(C=r[0],r[1]&&(D=r[1]));var y={type:"fetch",fetch:{method:b,url:d,body:l}};r=fetch(d,p).then(function(b){if(200<=
b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(C,D).then(function(b){!1!==b&&g.fire(y);return b},function(b){y.error=b;g.fire(y);return Promise.reject(b)});r._fetchArgs=[b,d,l,[C,D],p];return r}var b=[];u.isFunc(w)&&b.push(w);var g={on:function(c){b.push(c);return g},off:function(c){b.splice(b.indexOf(c),
1);return g},fire:u.raft(function(c){u.execAll(b,c);return g}),prop:function(b,n,l){var r=b,p=function(b,c,d){if(arguments.length&&b!==r){d=d||{type:"prop",prop:p,data:{old:r,"new":b}};l&&(b=l(d));if("undefined"==typeof b||b===r)return r;r=d.data["new"]=b;u.isFunc(c)?c(d):!1!==c&&g.fire(d)}return r};p._prop=!0;if(n&&n.then){p.update=d;if(n._fetchArgs){var C=n._fetchArgs[3];n._fetchArgs[3]=[function(b){return p(C[0]?C[0](b):b)},C[1]];p.update=function(){t.apply(null,n._fetchArgs)}}n.then(p)}return p.toString=
p},sync:function(b,d,l){var r=b,p=d;u.isFunc(r)||(r=function(d,g,l){if("string"==typeof b){var n,p;"e."==b.substr(0,2)?(n=d,p=b.substr(2)):(n=d.target,p=b)}return u.deepGet(n,p)});u.isArr(p)&&(p=function(b,c,l){var p=d[0],r=d[1];u.isFunc(r)&&(r=r(l.event,l.node,l.vm));var h=u.deepGet(p,r);b!==h&&(u.deepSet(p,r,b,c,l),u.isFunc(c)?c(l):!1!==c&&g.fire(l))});return function(b,c,d){var g={type:"sync",vm:d,node:c,event:b};p(r(b,c,d),l,g)}},fetch:t,get:function(b,d,l){l?b+=g.query(d):l=d;return t("get",
b,null,l)},"delete":function(b,d,l){l?b+=g.query(d):l=d;return t("delete",b,null,l)},post:function(b,d,g){return t("post",b,d,g)},put:function(b,d,g){return t("put",b,d,g)},patch:function(b,d,g){return t("patch",b,d,g)},query:function(b){if(!u.isObj(b))return"";var d=[],g=encodeURIComponent,r;for(r in b)d.push(g(r)+"="+g(b[r]));return d.length?"?"+d.join("&"):""}};return g}})(domvm);(function(x){function u(b,d,c,g,l,n){var t=null,h=null,u=null;if("/"==c[0]){u=c;h=!1;g={};n=u.split("#");d=n[0].split("?");t=d[0];n=n[1];d[1]&&(l={},d[1].split("&").map(function(b){b=b.split("=");l[b[0]]=null==b[1]?!0:b[1]}));var w,v;for(v in b){c=b[v];var x=c.path;if(w=t.match(c.regexPath)){h=v;-1!==x.indexOf(":")&&(g={},w.shift(),x.replace(/:([^\/]+)/g,function(b,c){g[c]=w.shift()}));break}}}else{h=c;c=b[h];var x=d+c.path,I=c.vars||{},u=-1!==x.indexOf(":")?t=x.replace(/:([^\/]+)/g,function(b,c){if((I[c]||
/^[^\/]+$/).test(g[c]))return g[c]+="";throw Error("Invalid value for route '"+x+"' segment '"+c+"': '"+g[c]+"'");}):t=x;if(l){var u=u+"?",F;for(F in l)u+=F+(!0!==l[F]?"="+l[F]:"")+"&";u=u.slice(0,-1)}u+=n?"#"+n:""}return{href:u,name:h,path:t,segs:g,hash:n,query:l}}function w(b,c){for(var d in b){var g=b[d];g.regexPath=new RegExp("^"+c+g.path.replace(/:([^\/]+)/g,function(b,c){var d=""+((g.vars||{})[c]||/[^\/]+/);return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var d=[],t=null,b=!1,g=null,
c=null,n=null,l="";x.route=function(r,p){function x(){var c=location,c=b?c.href.substr(c.origin.length):c.hash.substr(1)||"/";return u(B,l,c)}var D=null,y={href:function(c,d,g,n,p){var t=u(B,l,c,d,g,n);c=function(b){y["goto"](t,d,g,n,p);b.preventDefault()};c.href=(b?"":"#")+t.href;return c},config:function(d){(b=d.useHist)&&(l=d.root||"");g=d.willEnter||null;c=d.willExit||null;n=d.notFound||null;D=d.init||null},refresh:function(){y["goto"](x(),null,null,null,!0)},"goto":function(h,p,r,v,x,w){h.href||
(h=u(B,l,h,p,r,v));if(!1===h.name)n?n(h):console.log("Could not find route");else{p=null;for(v=0;v<d.length;v++)if(d[v].href===h.href){p=v;break}null===p&&(d.splice(t+1,1E4),d.push(h),p=d.length-1);h=d[t];v=d[p];var y=!0;r=!0;null!==t&&(c&&(y=w||c(h,v)),!1!==y&&(y=(y=B[h.name].onexit)?w||y.apply(null,(h?[h.segs,h.query,h.hash]:[]).concat(v)):!0));!1!==y&&(g&&(r=w||g(v,h)),!1!==r&&(r=B[v.name].onenter,r=w||r.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(h))),!1!==r&&(b?(E=!0,history[x?"replaceState":
"pushState"](null,"title",v.href)):(v="#"+v.href,location.hash!==v&&(E=!0,x?location.replace(v):location.hash=v)),t=p))}},route:function(b,c,g,l,n){if(null!=b)y["goto"](b,c,g,l,n,!0);else return null==t?x():d[t]}};y.location=y.route;var B=r(y,p);w(B,l);var E=!1;window.onhashchange=window.onpopstate=function(c){if(b||"popstate"!=c.type)!b&&E?E=!1:y["goto"](x(),null,null,null,!0)};D&&D();return y}})(domvm);
