/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(x){var w="function"==typeof HTMLElement,u=("undefined"==typeof window?{}:window).requestAnimationFrame,n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,
zoom:!0},t={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!t.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&t.isFunc(b.then)},isElem:function(b){return w?b instanceof HTMLElement:!1},execAll:function(b,h,c,g,l,B){var q;b&&(t.isArr(b)?b:[b]).forEach(function(b){q=b.call(null,h,c,g,l,B)});return q},repaint:function(b){b&&
b.el&&b.el.offsetHeight},insertArr:function(b,h,c,g){b.splice.apply(b,[c,g].concat(h))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,h){switch(b){case "input":case "textarea":case "select":case "option":switch(h){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,h){return isNaN(h)||n[b]?h:h+"px"},cmpArr:function(b,h){var c=b.length;if(c!=h.length)return!1;
for(;c--;)if(b[c]!==h[c])return!1;return!0},deepSet:function(b,h,c,g,l,B){h=h.split(".");var q=h.pop();h.forEach(function(c){b[c]||(b[c]={});b=b[c]});if(t.isFunc(b[q]))b[q](c,g,l,B);else b[q]=c},deepGet:function(b,h){var c=h.split(".");do b=b[c.shift()];while(c.length);return b},keyedIdx:function(b,h,c,g,l){for(g=0;g<h.length;g++)if(l=h[g],l.key===b)if(c){if(l.vm&&l.vm.ident[0]===c)return g}else return g;return-1},raft:function(b){function h(){c=0;b.apply(g,l)}if(!u)return b;var c,g,l;return function(){g=
this;l=arguments;c||(c=u(h))}}};x.utils=t})(domvm);(function(x){function w(a){for(I.repaint&&m.repaint(a);a=J.shift();)a[0].apply(null,a.slice(1))}function u(a,f){return!1===f?null:null==f&&null!=a?a:m.isVal(f)||m.isObj(f)||m.isArr(f)||m.isFunc(f)?f:null}function n(a,f,k,c,A,e){function r(){var a=F(f);if(v===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==v[e])return v=a,!0;return!1}function D(a,f,e){if(e)a[f]=a[f]||[],a[f].push(e);else for(var k in f)a[k]=a[k]||[],a[k].push(f[k])}function l(a,f,k){A=a;e=f;p.update(k,!1);null!=p.node&&(p.node.idx=
e,A.body[e]=p.node);return n(0,!1)}function d(a){return null==a?"":a}function n(a,c){c=!1!==c;if(a){for(var z=p;a--&&z.parent;)z=z.parent;z.redraw(0,!0);return z.vm}(z=p.node)&&b(p,"willRedraw",p);var l=p.refs,D=p.body;p.refs={};p.body=[];var C=r()&&p.render.call(p.api,p,f,k),d;if(!1===C||(d=g(C,A,e,p,!0))&&E(z,d))return z.moved=!0,z.wasSame=!0,p.refs=l,p.body=D,p;d.vm=p;p.node=d;l=m.isVal(k)&&"^"===k[0]?k.substr(1):m.isVal(d.ref)&&"^"===d.ref[0]?d.ref.substr(1):null;d.key=null!=k?k:d.key;for(D=A;D;)D.vm&&
(p.parent||(p.parent=D.vm,D.vm.body.push(p)),null!==l&&m.deepSet(D.vm.refs,l,d)),D=D.parent;if((l=z)&&z.el&&(d.type!==z.type||d.tag!==z.tag))var l=null,P=!0,v=z.el.parentNode;B(d,l);A&&(A.body[e]=d);c&&(z&&h(z),!z&&y||q(d,null,d.el),P&&((v||d.parent.el).insertBefore(d.el,v.childNodes[z.idx]),p.node=d));z&&b(p,"didRedraw",p);c&&z&&J.length&&w(d);return p}var y=!A;m.isArr(a)&&(f=a[1],k=a[2],c=a[3],a=a[0]);k=u(f,k);var v=!0,F=function(a){return!0},p={api:{},node:null,ident:[a,k],model:f,opts:c||{},render:null,
update:function(a,e){null==a||k===f&&!m.isVal(k)||(b(p,"willUpdate",p,a),f=p.model=a);return!1!==e?n(0):p},on:function(a,f){D(p.events,a,f)},hook:function(a,f){p.hooks=p.hooks||{};D(p.hooks,a,f)},diff:function(a){F=a},events:{},hooks:null,redraw:I.debounce?m.raft(n):n,patch:function(a,f){var e=null!=a.el;if(m.isObj(f)){a.props=a.props||{};var k="class"in f?(d(a["class"])+" "+d(f["class"])).trim():a.props["class"],A="style"in f?f.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=k,e.style=
A,e={tag:a.tag,el:a.el,ns:a.ns,props:e},C(e,a));a.props["class"]=k;a.props.style=A}else k=a.parent,e=B(g(f,k,a.idx,p),a),k.body[a.idx]=e},emit:function(a){for(var f=Array.prototype.slice.call(arguments),e=p,k;e;){if(k=e.events[a]){f[0]=k;m.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,f){p.node||n(0);if(null==a)return p;var e=null;f&&(a.textContent="",e=a,a=null);q(p.node,e,null,a);w(p.node);return p},attach:function(a){p.node||n(0);t(p.node,a);return p},unmount:function(){h(p.node)},
moveTo:l};c&&c.hooks&&p.hook(c.hooks);m.execAll(H,p);p.render=a.call(p.api,p,f,k);return A?l(A,e):p}function t(a,f){a.el=f;f._node=a;for(var k in a.props){var b=a.props[k],A=m.isEvProp(k)?k:"."===k[0]?k.substr(1):null;null!==A&&(f[A]=b)}if(m.isArr(a.body))for(k=0;k<a.body.length;k++)t(a.body[k],f.childNodes[k])}function b(a,f,k,b,A,e){if(a&&a.hooks&&(a=a.hooks[f]))if("did"==f.substr(0,3))J.push([m.execAll,a,k,b,A,e]);else return m.execAll(a,k,b,A,e)}function h(a,f){var k=a.el&&!a.moved;if(k){var z=
b(a.vm,"willUnmount",a.vm),A=b(a,"willRemove",a),e=z||A;a.removed=!0}a.wasSame?a.wasSame=!1:(m.isArr(a.body)&&a.body.forEach(function(a,k){h(a,f||e)}),f||(e?e.then(function(){c(a,k,!0)}):c(a,k)));a.moved=!1}function c(a,f,k){null!=a.el&&a.el.parentNode?f&&(a.el.parentNode.removeChild(a.el),a.el=null,r(a),b(a.vm,"didUnmount",a.vm),b(a,"didRemove",a),k&&w(a.parent)):r(a)}function g(a,f,k,b,A){var e=a;a=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,
hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};m.isFunc(e)&&(e=e());var c=e.length;if(m.isArr(e)&&c){a.type=m.TYPE_ELEM;if(1<c){var d=1;!m.isObj(e[1])||e[1].redraw||m.isElem(e[1])||(a.props=e[1],d=2);a.body=c==d+1?m.isVal(e[d])?e[d]:m.isFunc(e[d])?e[d]():e.slice(d):e.slice(d)}e=e[0];c=M[e];c||(c=["",""],c={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||c)[1],"class":(e.match(/\.([-\w.]+)/)||c)[1].replace(/\./g,
" ")},M[e]=c);a.tag=c.tag;if(c.id||c["class"])e=a.props||{},c.id&&null==e.id&&(e.id=c.id),c["class"]&&(a["class"]=c["class"],e["class"]=c["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,g;for(g in e)!m.isEvProp(g)&&m.isFunc(e[g])&&("href"==g?(e.onclick=e[g],e.href=e[g].href):e[g]=e[g]()),m.isDynProp(a.tag,g)&&(e["."+g]=e[g]);if(m.isObj(e.style))for(var h in e.style)g=e.style[h],m.isFunc(g)&&(e.style[h]=g());a.key=m.isVal(e._key)?e._key:m.isVal(e._ref)?e._ref:m.isVal(e.id)?
e.id:m.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var r in e)"_"==r[0]&&(a[r.substr(1)]=e[r],delete e[r])}}else m.isVal(e)?(a.type=m.TYPE_TEXT,a.body=e):m.isElem(e)&&(a.type=m.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&m.deepSet(b.refs,a.ref,a);a.parent=f;a.idx=k;a.ns=f&&f.ns?f.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;A||a.diff||!m.isArr(a.body)||l(a,b);return a}function l(a,f){for(var k=0,c=a.body.length;k<c;k++){var b=a.body[k],e=null,d=null,r=!1,l=!1;m.isFunc(b)&&
(b=b());if(null==b)r=!0;else{var h=m.isArr(b),C=h?!1:m.isObj(b);if(h)b.length?b._expl?l=!0:"string"==typeof b[0]&&""!==b[0]?(d=g(b,a,k,f),e=d.key):m.isFunc(b[0])?e=u(b[1],b[2]):l=!0:r=!0;else if(C)if(m.isFunc(b.redraw))b.moveTo(a,k),d=b.node,e=b.ident[1];else if(m.isElem(b))d=g(b,a,k,f);else{a.body[k--]=""+b;continue}else""===b?r=!0:0<k&&a.body[k-1].type===m.TYPE_TEXT?(a.body[k-1].body+=""+b,r=!0):d=g(""+b,a,k,f)}r||l?(l?m.insertArr(a.body,b,k,1):a.body.splice(k,1),c=a.body.length,k--):(null!==e&&
(a.hasKeys=!0),a.body[k]=d||b)}a.body._init=!0}function B(a,f){if(E(f,a))return f.moved=!0,f.wasSame=!0,f;f&&(b(a,"willRecycle",f,a),d(f,a),b(a,"didRecycle",f,a));if(m.isArr(a.body)){if(!a.body._init){for(var k=a;!k.vm;)k=k.parent;l(a,k.vm)}var c=0;a.body.forEach(function(b,e){var k=m.isArr(b);if(f){var d=y(b,a,f,c);if(null!==d){var g=d[0],d=d[1];g===c&&c++;g=f.body[g];g.vm?k?2===d?g.vm.moveTo(a,e,b[1]):1===d&&n(b[0],b[1],b[2],b[3],a,e):b.vm&&2===d&&b.vm===g.vm&&g.vm.moveTo(a,e):a.body[e]=B(b,g);
return}}k?n(b[0],b[1],b[2],b[3],a,e):a.body[e]=B(b)})}return a}function q(a,f,k,c){for(var d=!a.el;k&&k._node.removed;)k=k.nextSibling;d&&a.vm&&b(a.vm,"willMount",a.vm);if(a.type==m.TYPE_ELEM)if(d&&(a.el=f||(a.ns?L.createElementNS(G[a.ns],a.tag):L.createElement(a.tag)),a.props&&C(a)),m.isArr(a.body)){f=0;for(var e=a.el.firstChild;f<a.body.length;f++)e=q(a.body[f],null,e)}else m.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:d&&(a.el.textContent=a.body));else a.type==m.TYPE_TEXT&&d&&(a.el=L.createTextNode(a.body));
a.el._node=a;f=a.parent;k!==a.el&&(c||f&&f.el)&&(f=d?"Insert":"Reinsert",b(a,"will"+f,a),(c||a.parent.el).insertBefore(a.el,k),b(a,"did"+f,a));d&&a.vm&&a.vm.hooks&&!a.moved&&b(a.vm,"didMount",a.vm);return k!==a.el?k:k.nextSibling}function y(a,f,b,c,d){var e=m.isArr(a),g=e?u(a[1],a[2]):a.key,r=b.hasKeys,l=f.hasKeys;b=b.body;f=f.body;if(null!==g&&r)return a=m.keyedIdx(g,b,e?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;d=0===d?0:d||b.length-1;for(g=null;c<=d;c++)if(r=b[c],null!==r&&
r.el)if(e&&r.vm){if(r.vm.ident[0]===a[0]){if(r.vm.ident[1]===u(a[1],a[2]))return[c,2];!g&&l&&-1==m.keyedIdx(r.key,f,r.vm.ident[0])&&(g=[c,1])}}else if(a.type===r.type&&(a.type===m.TYPE_TEXT||null!==a.tag&&a.tag===r.tag)&&(null===r.key||!l||-1==m.keyedIdx(r.key,f,r.vm?r.vm.ident[0]:null)))return[c,1];return g}function E(a,f){if(a&&a.diff&&f.diff&&a.diff[0]===f.diff[0]){var b=a.diff.slice(1).concat(f.diff.slice(1));return!f.diff[0].apply(null,b)}return!1}function d(a,f){if(a.el)if(f.el=a.el,a.el=null,
f.el&&(f.el._node=f),f.type===m.TYPE_TEXT&&f.body!==a.body)f.el.nodeValue=f.body;else{C(f,a);var b=!m.isArr(f.body),c=!m.isArr(a.body);b&&f.body!==a.body?c&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:c&&!b&&(f.el.textContent="");a.moved=!0}}function r(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;K.push(a)}function F(a,f,b,c){return function(b){var e,k=b.target._node,
d=null;if(m.isFunc(a))e=a.call(f,b,k,c);else if(m.isArr(a))d=a.slice(1),e=a[0].apply(f,d.concat(b,k,c));else if(m.isObj(a))for(var g in a){var r=a[g];null!=r&&"_"!=g[0]&&b.target.matches(g)&&(m.isArr(r)?(d=r.slice(1),e=r[0].apply(f,d.concat(b,k,c))):m.isFunc(r)&&(e=r.call(f,b,k,c)))}!1===e&&(b.preventDefault(),b.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:k,event:b,data:d})}}function C(a,f){var b=!f;f=f||{};if(f.props||a.props){var c=f.props||{},d=
a.props||{},e=c.style,g=d.style;if(m.isObj(e)||m.isObj(g))N(a.el,a.tag,e||{},g||{},Q,v,a.ns,b,a),c.style=d.style=null;N(a.el,a.tag,c,d,R,O,a.ns,b,a);g&&(d.style=g)}}function N(a,f,b,c,d,e,g,r,l){for(var h in c)if(f=c[h],null!==f){var C="."===h[0]?a[h.substr(1)]:b[h];f===C||m.isArr(f)&&m.isArr(C)&&m.cmpArr(f,C)||d(a,h,f,g,r,l)}for(h in b)null!==b[h]&&null==c[h]&&e(a,h,g,r)}function Q(a,b,c){a.style[b]=m.autoPx(b,c)}function v(a,b){a.style[b]=""}function R(a,b,c,d,g,e){if("class"===b)a.className=c;
else if("id"===b)a.id=c;else if("."===b[0])b=b.substr(1),"svg"===d?a[b].baseVal=c:a[b]=c;else if(m.isEvProp(b)){for(d=e;!d.vm;)d=d.parent;a[b]=F(c,d.vm.opts.evctx||d.vm.model||null,e,d.vm)}else!1===c?O(a,b,d,g):a.setAttribute(b,!0===c?"":c)}function O(a,b,c,d){d||("class"===b?a.className="":"id"===b?a.id="":"."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):m.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var G={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
L="undefined"==typeof document?{}:document,M={},K=[],J=[],I={debounce:!0,repaint:!0};x.view=n;x.view.config=function(a){for(var b in a)I[b]=a[b]};var H=null;x.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var m=x.utils;return x})(domvm);(function(x){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,u=x.utils;x.html=function(n){var t="";switch(n.type){case u.TYPE_ELEM:t+="<"+n.tag;if(n.props){var b=u.isVal(n.props.style)?n.props.style:"",h=u.isObj(n.props.style)?n.props.style:null;if(h)for(var c in h)null!==h[c]&&(b+=u.camelDash(c)+": "+u.autoPx(c,h[c])+"; ");for(c in n.props)u.isEvProp(c)||"."===c[0]||(h=n.props[c],u.isFunc(h)&&(h=h()),u.isObj(h)||(!0===h?t+=" "+c:!1!==h&&null!==h&&
"."!==c[0]&&(t+=" "+c+'="'+h+'"')));b.length&&(t+=' style="'+b.trim()+'"')}if(n.ns&&"svg"!==n.tag&&"math"!==n.tag&&!n.body)return t+"/>";t+=">";break;case u.TYPE_TEXT:return n.body}w.test(n.tag)||(u.isArr(n.body)?n.body.forEach(function(b){t+=x.html(b)}):t+=n.body||"",t+="</"+n.tag+">");return t}})(domvm);(function(x){var w=x.utils;x.watch=function(u){function n(){}function t(b,g,l,n,q){q=q||{};q.method=b.toUpperCase();"credentials"in q||(q.credentials="same-origin");null!==l&&(w.isArr(l)||w.isObj(l)?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(l)):q.body=""+l);var y=n,E=function(b){return Promise.reject(b)};n instanceof Array&&(y=n[0],n[1]&&(E=n[1]));var d={type:"fetch",fetch:{method:b,url:g,body:l}};n=fetch(g,q).then(function(b){if(200<=
b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(y,E).then(function(b){!1!==b&&h.fire(d);return b},function(b){d.error=b;h.fire(d);return Promise.reject(b)});n._fetchArgs=[b,g,l,[y,E],q];return n}var b=[];w.isFunc(u)&&b.push(u);var h={on:function(c){b.push(c);return h},off:function(c){b.splice(b.indexOf(c),
1);return h},fire:w.raft(function(c){w.execAll(b,c);return h}),prop:function(b,g,l){var B=b,q=function(b,c,g){if(arguments.length&&b!==B){g=g||{type:"prop",prop:q,data:{old:B,"new":b}};l&&(b=l(g));if("undefined"==typeof b||b===B)return B;B=g.data["new"]=b;w.isFunc(c)?c(g):!1!==c&&h.fire(g)}return B};q._prop=!0;if(g&&g.then){q.update=n;if(g._fetchArgs){var y=g._fetchArgs[3];g._fetchArgs[3]=[function(b){return q(y[0]?y[0](b):b)},y[1]];q.update=function(){t.apply(null,g._fetchArgs)}}g.then(q)}return q.toString=
q},sync:function(b,g,l){var n=b,q=g;w.isFunc(n)||(n=function(g,h,d){if("string"==typeof b){var l,n;"e."==b.substr(0,2)?(l=g,n=b.substr(2)):(l=g.target,n=b)}return w.deepGet(l,n)});w.isArr(q)&&(q=function(b,c,d){var l=g[0],n=g[1];w.isFunc(n)&&(n=n(d.event,d.node,d.vm));var C=w.deepGet(l,n);b!==C&&(w.deepSet(l,n,b,c,d),w.isFunc(c)?c(d):!1!==c&&h.fire(d))});return function(b,c,d){var g={type:"sync",vm:d,node:c,event:b};q(n(b,c,d),l,g)}},fetch:t,get:function(b,g,l){l?b+=h.query(g):l=g;return t("get",
b,null,l)},"delete":function(b,g,l){l?b+=h.query(g):l=g;return t("delete",b,null,l)},post:function(b,g,l){return t("post",b,g,l)},put:function(b,g,l){return t("put",b,g,l)},patch:function(b,g,l){return t("patch",b,g,l)},query:function(b){if(!w.isObj(b))return"";var g=[],l=encodeURIComponent,h;for(h in b)g.push(l(h)+"="+l(b[h]));return g.length?"?"+g.join("&"):""}};return h}})(domvm);(function(x){function w(b,c,g,h,d,l){var n=null,C=null,t=null;if("/"==g[0]){t=g;C=!1;h={};l=t.split("#");c=l[0].split("?");n=c[0];l=l[1];c[1]&&(d={},c[1].split("&").map(function(b){b=b.split("=");d[b[0]]=null==b[1]?!0:b[1]}));var w,v;for(v in b){g=b[v];var u=g.path;if(w=n.match(g.regexPath)){C=v;-1!==u.indexOf(":")&&(h={},w.shift(),u.replace(/:([^\/]+)/g,function(b,c){h[c]=w.shift()}));break}}}else{C=g;g=b[C];var u=c+g.path,x=g.vars||{},t=-1!==u.indexOf(":")?n=u.replace(/:([^\/]+)/g,function(b,c){if((x[c]||
/^[^\/]+$/).test(h[c]))return h[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+h[c]+"'");}):n=u;if(d){var t=t+"?",G;for(G in d)t+=G+(!0!==d[G]?"="+d[G]:"")+"&";t=t.slice(0,-1)}t+=l?"#"+l:""}return{href:t,name:C,path:n,segs:h,hash:l,query:d}}function u(b,c){for(var g in b){var h=b[g];h.regexPath=new RegExp("^"+c+h.path.replace(/:([^\/]+)/g,function(b,c){var g=""+((h.vars||{})[c]||/[^\/]+/);return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var n=[],t=null,b=!1,h=null,
c=null,g=null,l="";x.route=function(x,q){function y(){var c=location,c=b?c.href.substr(c.origin.length):c.hash.substr(1)||"/";return w(r,l,c)}var E=null,d={href:function(c,g,h,n,t){var q=w(r,l,c,g,h,n);c=function(b){d["goto"](q,g,h,n,t);b.preventDefault()};c.href=(b?"":"#")+q.href;return c},config:function(d){(b=d.useHist)&&(l=d.root||"");h=d.willEnter||null;c=d.willExit||null;g=d.notFound||null;E=d.init||null},refresh:function(){d["goto"](y(),null,null,null,!0)},"goto":function(d,q,u,v,x,B){d.href||
(d=w(r,l,d,q,u,v));if(!1===d.name)g?g(d):console.log("Could not find route");else{q=null;for(v=0;v<n.length;v++)if(n[v].href===d.href){q=v;break}null===q&&(n.splice(t+1,1E4),n.push(d),q=n.length-1);d=n[t];v=n[q];var y=!0;u=!0;null!==t&&(c&&(y=B||c(d,v)),!1!==y&&(y=(y=r[d.name].onexit)?B||y.apply(null,(d?[d.segs,d.query,d.hash]:[]).concat(v)):!0));!1!==y&&(h&&(u=B||h(v,d)),!1!==u&&(u=r[v.name].onenter,u=B||u.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(d))),!1!==u&&(b?(F=!0,history[x?"replaceState":
"pushState"](null,"title",v.href)):(v="#"+v.href,location.hash!==v&&(F=!0,x?location.replace(v):location.hash=v)),t=q))}},route:function(b,c,g,h,l){if(null!=b)d["goto"](b,c,g,h,l,!0);else return null==t?y():n[t]}};d.location=d.route;var r=x(d,q);u(r,l);var F=!1;window.onhashchange=window.onpopstate=function(c){if(b||"popstate"!=c.type)!b&&F?F=!1:d["goto"](y(),null,null,null,!0)};E&&E();return d}})(domvm);
