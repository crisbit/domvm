/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(y){var u="function"==typeof HTMLElement,w=("undefined"==typeof window?{}:window).requestAnimationFrame,k={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,
zoom:!0},t={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!t.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&t.isFunc(c.then)},isElem:function(c){return u&&c instanceof HTMLElement},execAll:function(c,g,b,h,m,z){var p;c&&(t.isArr(c)?c:[c]).forEach(function(c){p=c.call(null,g,b,h,m,z)});return p},repaint:function(c){c&&
c.el&&c.el.offsetHeight},insertArr:function(c,g,b,h){c.splice.apply(c,[b,h].concat(g))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,g){switch(c){case "input":case "textarea":case "select":case "option":switch(g){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,g){return isNaN(g)||k[c]?g:g+"px"},cmpArr:function(c,g){var b=c.length;if(b!=g.length)return!1;
for(;b--;)if(c[b]!==g[b])return!1;return!0},deepSet:function(c,g,b,h,m,z){g=g.split(".");var p=g.pop();g.forEach(function(b){c[b]||(c[b]={});c=c[b]});if(t.isFunc(c[p]))c[p](b,h,m,z);else c[p]=b},deepGet:function(c,g){var b=g.split(".");do c=c[b.shift()];while(b.length);return c},keyedIdx:function(c,g,b,h,m){m=m||g.length;for(h=h||0;h<m;h++){var z=g[h];if(z.key===c)if(b){if(z.vm&&z.vm.ident[0]===b)return h}else return h}return-1},raft:function(c){function g(){b=0;c.apply(h,m)}if(!w)return c;var b,
h,m;return function(){h=this;m=arguments;b||(b=w(g))}}};y.utils=t})(domvm);(function(y){function u(a){for(K.repaint&&n.repaint(a);a=L.shift();)a[0].apply(null,a.slice(1))}function w(a,d){return!1===d?null:null==d&&null!=a?a:n.isVal(d)||n.isObj(d)||n.isArr(d)||n.isFunc(d)?d:null}function k(a,d,f,b,r,e){function v(){var a=F(d);if(x===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==x[e])return x=a,!0;return!1}function m(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var f in d)a[f]=a[f]||[],a[f].push(d[f])}function k(a,d,f){r=a;e=d;q.update(f,!1);null!=q.node&&(q.node.idx=
e,r.body[e]=q.node);return A(0,!1)}function I(a){return null==a?"":a}function A(a,b){b=!1!==b;if(a){for(var B=q;a--&&B.parent;)B=B.parent;B.redraw(0,!0);return B.vm}(B=q.node)&&c(q,"willRedraw",q);var m=q.refs,l=q.body;q.refs={};q.body=[];var k=v()&&q.render.call(q.api,q,d,f),C;if(!1===k||(C=h(k,r,e,q,!0))&&E(B,C))return B.moved=!0,B.wasSame=!0,q.refs=m,q.body=l,q;C.vm=q;q.node=C;m=n.isVal(f)&&"^"===f[0]?f.substr(1):n.isVal(C.ref)&&"^"===C.ref[0]?C.ref.substr(1):null;C.key=null!=f?f:C.key;for(l=r;l;)l.vm&&
(q.parent||(q.parent=l.vm,l.vm.body.push(q)),null!==m&&n.deepSet(l.vm.refs,m,C)),l=l.parent;if((m=B)&&B.el&&(C.type!==B.type||C.tag!==B.tag))var m=null,I=!0,O=B.el.parentNode;z(C,m);r&&(r.body[e]=C);b&&(B&&g(B),!B&&D||p(C,null,C.el),I&&((O||C.parent.el).insertBefore(C.el,O.childNodes[B.idx]),q.node=C));B&&c(q,"didRedraw",q);b&&B&&L.length&&u(C);return q}var D=!r;n.isArr(a)&&(d=a[1],f=a[2],b=a[3],a=a[0]);f=w(d,f);var x=!0,F=function(a){return!0},q={api:{},node:null,ident:[a,f],model:d,opts:b||{},render:null,
update:function(a,e){null==a||f===d&&!n.isVal(f)||(c(q,"willUpdate",q,a),d=q.model=a);return!1!==e?A(0):q},on:function(a,d){m(q.events,a,d)},hook:function(a,d){q.hooks=q.hooks||{};m(q.hooks,a,d)},diff:function(a){F=a},events:{},hooks:null,redraw:K.debounce?n.raft(A):A,patch:function(a,d){var e=null!=a.el;if(n.isObj(d)){a.props=a.props||{};var f="class"in d?(I(a["class"])+" "+I(d["class"])).trim():a.props["class"],r="style"in d?d.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=f,e.style=
r,e={tag:a.tag,el:a.el,ns:a.ns,props:e},l(e,a));a.props["class"]=f;a.props.style=r}else f=a.parent,e=z(h(d,f,a.idx,q),a),f.body[a.idx]=e},emit:function(a){for(var d=Array.prototype.slice.call(arguments),e=q,f;e;){if(f=e.events[a]){d[0]=f;n.execAll.apply(null,d);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,d){q.node||A(0);if(null==a)return q;var e=null;d&&(a.textContent="",e=a,a=null);p(q.node,e,null,a);u(q.node);return q},attach:function(a){q.node||A(0);t(q.node,a);return q},unmount:function(){g(q.node);
u(r)},moveTo:k};b&&b.hooks&&q.hook(b.hooks);n.execAll(H,q);q.render=a.call(q.api,q,d,f);return r?k(r,e):q}function t(a,d){a.el=d;d._node=a;for(var f in a.props){var c=a.props[f],r=n.isEvProp(f)?f:"."===f[0]?f.substr(1):null;null!==r&&(d[r]=c)}if(n.isArr(a.body))for(f=0;f<a.body.length;f++)t(a.body[f],d.childNodes[f])}function c(a,d,f,c,r,e){if(a&&a.hooks&&(a=a.hooks[d]))if("did"==d.substr(0,3))L.push([n.execAll,a,f,c,r,e]);else return n.execAll(a,f,c,r,e)}function g(a,d){var f=a.el&&!a.moved;if(f){var B=
c(a.vm,"willUnmount",a.vm),r=c(a,"willRemove",a),e=B||r;a.removed=!0}a.wasSame?a.wasSame=!1:(n.isArr(a.body)&&a.body.forEach(function(a,f){g(a,d||e)}),d||(e?e.then(function(){b(a,f,!0)}):b(a,f)));a.moved=!1}function b(a,d,f){null!=a.el&&a.el.parentNode?d&&(a.el.parentNode.removeChild(a.el),a.el=null,c(a,"didRemove",a),c(a.vm,"didUnmount",a.vm),v(a),f&&u(a.parent)):v(a)}function h(a,d,f,c,r){var e=a;a=0<M.length?M.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,
hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};n.isFunc(e)&&(e=e());var b=e.length;if(n.isArr(e)&&b){a.type=n.TYPE_ELEM;if(1<b){var l=1;!n.isObj(e[1])||e[1].redraw||n.isElem(e[1])||(a.props=e[1],l=2);a.body=b==l+1?n.isVal(e[l])?e[l]:n.isFunc(e[l])?e[l]():e.slice(l):e.slice(l)}e=e[0];b=P[e];b||(b=["",""],b={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||b)[1],"class":(e.match(/\.([-\w.]+)/)||b)[1].replace(/\./g,
" ")},P[e]=b);a.tag=b.tag;if(b.id||b["class"])e=a.props||{},b.id&&null==e.id&&(e.id=b.id),b["class"]&&(a["class"]=b["class"],e["class"]=b["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,h;for(h in e)!n.isEvProp(h)&&n.isFunc(e[h])&&("href"==h?(e.onclick=e[h],e.href=e[h].href):e[h]=e[h]()),n.isDynProp(a.tag,h)&&(e["."+h]=e[h]);if(n.isObj(e.style))for(var g in e.style)h=e.style[g],n.isFunc(h)&&(e.style[g]=h());a.key=n.isVal(e._key)?e._key:n.isVal(e._ref)?e._ref:n.isVal(e.id)?
e.id:n.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var v in e)"_"==v[0]&&(a[v.substr(1)]=e[v],delete e[v])}}else n.isVal(e)?(a.type=n.TYPE_TEXT,a.body=e):n.isElem(e)&&(a.type=n.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&n.deepSet(c.refs,a.ref,a);a.parent=d;a.idx=f;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;r||a.diff||!n.isArr(a.body)||m(a,c);return a}function m(a,d){for(var f=0,b=a.body.length;f<b;f++){var r=a.body[f],e=null,c=null,l=!1,v=!1;n.isFunc(r)&&
(r=r());if(null==r)l=!0;else{var g=n.isArr(r),m=g?!1:n.isObj(r);if(g)r.length?r._expl?v=!0:"string"==typeof r[0]&&""!==r[0]?(c=h(r,a,f,d),e=c.key):n.isFunc(r[0])?e=w(r[1],r[2]):v=!0:l=!0;else if(m)if(n.isFunc(r.redraw))r.moveTo(a,f),c=r.node,e=r.ident[1];else if(n.isElem(r))c=h(r,a,f,d);else{a.body[f--]=""+r;continue}else""===r?l=!0:0<f&&a.body[f-1].type===n.TYPE_TEXT?(a.body[f-1].body+=""+r,l=!0):c=h(""+r,a,f,d)}l||v?(v?n.insertArr(a.body,r,f,1):a.body.splice(f,1),b=a.body.length,f--):(null!==e&&
(a.hasKeys=!0),a.body[f]=c||r)}a.body._init=!0}function z(a,d){if(E(d,a))return d.moved=!0,d.wasSame=!0,d;d&&(c(a,"willRecycle",d,a),A(d,a),c(a,"didRecycle",d,a));if(n.isArr(a.body)){if(!a.body._init){for(var f=a;!f.vm;)f=f.parent;m(a,f.vm)}var b=0;a.body.forEach(function(f,e){var c=n.isArr(f);if(d){var l=D(f,a,d,b);if(null!==l){var h=l[0],l=l[1];h===b&&b++;h=d.body[h];h.vm?c?2===l?h.vm.moveTo(a,e,f[1]):1===l&&k(f[0],f[1],f[2],f[3],a,e):f.vm&&2===l&&f.vm===h.vm&&h.vm.moveTo(a,e):a.body[e]=z(f,h);
return}}c?k(f[0],f[1],f[2],f[3],a,e):a.body[e]=z(f)})}return a}function p(a,d,f,b){for(var h=!a.el;f&&f._node.removed;)f=f.nextSibling;h&&a.vm&&c(a.vm,"willMount",a.vm);if(a.type==n.TYPE_ELEM)if(h&&(a.el=d||(a.ns?N.createElementNS(G[a.ns],a.tag):N.createElement(a.tag)),a.props&&l(a)),n.isArr(a.body)){d=0;for(var e=a.el.firstChild;d<a.body.length;d++)e=p(a.body[d],null,e)}else n.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:h&&(a.el.textContent=a.body));else a.type==n.TYPE_TEXT&&h&&(a.el=N.createTextNode(a.body));
a.el._node=a;d=a.parent;f!==a.el&&(b||d&&d.el)&&(d=h?"Insert":"Reinsert",c(a,"will"+d,a),(b||a.parent.el).insertBefore(a.el,f),c(a,"did"+d,a));h&&a.vm&&a.vm.hooks&&!a.moved&&c(a.vm,"didMount",a.vm);return f!==a.el?f:f.nextSibling}function D(a,d,f,b,c){var e=n.isArr(a),h=e?w(a[1],a[2]):a.key,l=f.hasKeys,v=d.hasKeys;f=f.body;d=d.body;if(null!==h&&l)return a=n.keyedIdx(h,f,e?a[0]:null,b,c),-1<a?[a,2]:null;b=b||0;if(b>f.length-1)return null;c=0===c?0:c||f.length-1;h=null;for(l=b;l<=c;l++){var g=f[l];
if(null!==g&&g.el)if(e&&g.vm){if(g.vm.ident[0]===a[0]){if(g.vm.ident[1]===w(a[1],a[2]))return[l,2];!h&&v&&-1==n.keyedIdx(g.key,d,g.vm.ident[0],b,c)&&(h=[l,1])}}else if(a.type===g.type&&(a.type===n.TYPE_TEXT||null!==a.tag&&a.tag===g.tag)&&(null===g.key||!v||-1==n.keyedIdx(g.key,d,g.vm?g.vm.ident[0]:null,b,c)))return[l,1]}return h}function E(a,d){if(a&&a.diff&&d.diff&&a.diff[0]===d.diff[0]){var f=a.diff.slice(1).concat(d.diff.slice(1));return!d.diff[0].apply(null,f)}return!1}function A(a,d){if(a.el)if(d.el=
a.el,a.el=null,d.el&&(d.el._node=d),d.type===n.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{l(d,a);var f=!n.isArr(d.body),b=!n.isArr(a.body);f&&d.body!==a.body?b&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:b&&!f&&(d.el.textContent="");a.moved=!0}}function v(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;M.push(a)}function F(a,d,f,b){return function(f){var e,
c=f.target._node,h=null;if(n.isFunc(a))e=a.call(d,f,c,b);else if(n.isArr(a))h=a.slice(1),e=a[0].apply(d,h.concat(f,c,b));else if(n.isObj(a))for(var l in a){var g=a[l];null!=g&&"_"!=l[0]&&f.target.matches(l)&&(n.isArr(g)?(h=g.slice(1),e=g[0].apply(d,h.concat(f,c,b))):n.isFunc(g)&&(e=g.call(d,f,c,b)))}!1===e&&(f.preventDefault(),f.stopPropagation());b.opts.hasOwnProperty("watch")&&b.opts.watch.fire({type:"event",vm:b,node:c,event:f,data:h})}}function l(a,d){var f=!d;d=d||{};if(d.props||a.props){var b=
d.props||{},c=a.props||{},e=b.style,h=c.style;if(n.isObj(e)||n.isObj(h))Q(a.el,a.tag,e||{},h||{},R,x,a.ns,f,a),b.style=c.style=null;Q(a.el,a.tag,b,c,S,J,a.ns,f,a);h&&(c.style=h)}}function Q(a,d,f,b,c,e,h,l,g){for(var v in b)if(d=b[v],null!==d){var m="."===v[0]?a[v.substr(1)]:f[v];d===m||n.isArr(d)&&n.isArr(m)&&n.cmpArr(d,m)||c(a,v,d,h,l,g)}for(v in f)null!==f[v]&&null==b[v]&&e(a,v,h,l)}function R(a,d,b){a.style[d]=n.autoPx(d,b)}function x(a,d){a.style[d]=""}function S(a,d,b,c,h,e){if("class"===d)a.className=
b;else if("id"===d)a.id=b;else if("."===d[0])d=d.substr(1),"svg"===c?a[d].baseVal=b:a[d]=b;else if(n.isEvProp(d)){for(c=e;!c.vm;)c=c.parent;a[d]=F(b,c.vm.opts.evctx||c.vm.model||null,e,c.vm)}else!1===b?J(a,d,c,h):a.setAttribute(d,!0===b?"":b)}function J(a,d,b,c){c||("class"===d?a.className="":"id"===d?a.id="":"."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):n.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var G={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
N="undefined"==typeof document?{}:document,P={},M=[],L=[],K={debounce:!0,repaint:!0};y.view=k;y.view.config=function(a){for(var d in a)K[d]=a[d]};var H=null;y.view.extend=function(a,d){H=!H||d?[]:H;H.push(a)};var n=y.utils;return y})(domvm);(function(y){var u=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,w=y.utils;y.html=function(k){k.render&&(k.node||k.mount(),k=k.node);var t="";switch(k.type){case w.TYPE_ELEM:if(null==k.body&&k.el)return k.el.outerHTML;t+="<"+k.tag;if(k.props){var c=w.isVal(k.props.style)?k.props.style:"",g=w.isObj(k.props.style)?k.props.style:null;if(g)for(var b in g)null!==g[b]&&(c+=w.camelDash(b)+": "+w.autoPx(b,g[b])+"; ");for(b in k.props)w.isEvProp(b)||"."===b[0]||
(g=k.props[b],w.isFunc(g)&&(g=g()),w.isObj(g)||(!0===g?t+=" "+b:!1!==g&&null!==g&&"."!==b[0]&&(t+=" "+b+'="'+g+'"')));c.length&&(t+=' style="'+c.trim()+'"')}if(k.ns&&"svg"!==k.tag&&"math"!==k.tag&&!k.body)return t+"/>";t+=">";break;case w.TYPE_TEXT:return k.body}u.test(k.tag)||(w.isArr(k.body)?k.body.forEach(function(b){t+=y.html(b)}):t+=k.body||"",t+="</"+k.tag+">");return t}})(domvm);(function(y){var u=y.utils;y.watch=function(w){function k(){}function t(b,c,m,k,p){p=p||{};p.method=b.toUpperCase();"credentials"in p||(p.credentials="same-origin");null!==m&&(u.isArr(m)||u.isObj(m)?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(m)):p.body=""+m);var D=k,E=function(b){return Promise.reject(b)};k instanceof Array&&(D=k[0],k[1]&&(E=k[1]));var A={type:"fetch",fetch:{method:b,url:c,body:m}};k=fetch(c,p).then(function(b){if(200<=
b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(D,E).then(function(b){!1!==b&&g.fire(A);return b},function(b){A.error=b;g.fire(A);return Promise.reject(b)});k._fetchArgs=[b,c,m,[D,E],p];return k}var c=[];u.isFunc(w)&&c.push(w);var g={on:function(b){c.push(b);return g},off:function(b){c.splice(c.indexOf(b),
1);return g},fire:u.raft(function(b){u.execAll(c,b);return g}),prop:function(b,c,m){var z=b,p=function(b,c,h){if(arguments.length&&b!==z){h=h||{type:"prop",prop:p,data:{old:z,"new":b}};m&&(b=m(h));if("undefined"==typeof b||b===z)return z;z=h.data["new"]=b;u.isFunc(c)?c(h):!1!==c&&g.fire(h)}return z};p._prop=!0;if(c&&c.then){p.update=k;if(c._fetchArgs){var D=c._fetchArgs[3];c._fetchArgs[3]=[function(b){return p(D[0]?D[0](b):b)},D[1]];p.update=function(){t.apply(null,c._fetchArgs)}}c.then(p)}return p.toString=
p},sync:function(b,c,m){var k=b,p=c;u.isFunc(k)||(k=function(c,h,g){if("string"==typeof b){var m,k;"e."==b.substr(0,2)?(m=c,k=b.substr(2)):(m=c.target,k=b)}return u.deepGet(m,k)});u.isArr(p)&&(p=function(b,m,k){var v=c[0],p=c[1];u.isFunc(p)&&(p=p(k.event,k.node,k.vm));var l=u.deepGet(v,p);b!==l&&(u.deepSet(v,p,b,m,k),u.isFunc(m)?m(k):!1!==m&&g.fire(k))});return function(b,c,h){var g={type:"sync",vm:h,node:c,event:b};p(k(b,c,h),m,g)}},fetch:t,get:function(b,c,m){m?b+=g.query(c):m=c;return t("get",
b,null,m)},"delete":function(b,c,m){m?b+=g.query(c):m=c;return t("delete",b,null,m)},post:function(b,c,g){return t("post",b,c,g)},put:function(b,c,g){return t("put",b,c,g)},patch:function(b,c,g){return t("patch",b,c,g)},query:function(b){if(!u.isObj(b))return"";var c=[],g=encodeURIComponent,k;for(k in b)c.push(g(k)+"="+g(b[k]));return c.length?"?"+c.join("&"):""}};return g}})(domvm);(function(y){function u(b,c,g,h,k,m){var t=null,l=null,u=null;if("/"==g[0]){u=g;l=!1;h={};m=u.split("#");c=m[0].split("?");t=c[0];m=m[1];c[1]&&(k={},c[1].split("&").map(function(b){b=b.split("=");k[b[0]]=null==b[1]?!0:b[1]}));var w,x;for(x in b){g=b[x];var y=g.path;if(w=t.match(g.regexPath)){l=x;-1!==y.indexOf(":")&&(h={},w.shift(),y.replace(/:([^\/]+)/g,function(b,c){h[c]=w.shift()}));break}}}else{l=g;g=b[l];var y=c+g.path,J=g.vars||{},u=-1!==y.indexOf(":")?t=y.replace(/:([^\/]+)/g,function(b,c){if((J[c]||
/^[^\/]+$/).test(h[c]))return h[c]+="";throw Error("Invalid value for route '"+y+"' segment '"+c+"': '"+h[c]+"'");}):t=y;if(k){var u=u+"?",G;for(G in k)u+=G+(!0!==k[G]?"="+k[G]:"")+"&";u=u.slice(0,-1)}u+=m?"#"+m:""}return{href:u,name:l,path:t,segs:h,hash:m,query:k}}function w(b,c){for(var g in b){var h=b[g];h.regexPath=new RegExp("^"+c+h.path.replace(/:([^\/]+)/g,function(b,c){var g=""+((h.vars||{})[c]||/[^\/]+/);return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var k=[],t=null,c=!1,g=null,
b=null,h=null,m="";y.route=function(y,p){function D(){var b=location,b=c?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return u(v,m,b)}var E=null,A={href:function(b,g,h,k,p){var t=u(v,m,b,g,h,k);b=function(b){A["goto"](t,g,h,k,p);b.preventDefault()};b.href=(c?"":"#")+t.href;return b},config:function(k){(c=k.useHist)&&(m=k.root||"");g=k.willEnter||null;b=k.willExit||null;h=k.notFound||null;E=k.init||null},refresh:function(){A["goto"](D(),null,null,null,!0)},"goto":function(l,p,w,x,y,A){l.href||
(l=u(v,m,l,p,w,x));if(!1===l.name)h?h(l):console.log("Could not find route");else{p=null;for(x=0;x<k.length;x++)if(k[x].href===l.href){p=x;break}null===p&&(k.splice(t+1,1E4),k.push(l),p=k.length-1);l=k[t];x=k[p];var z=!0;w=!0;null!==t&&(b&&(z=A||b(l,x)),!1!==z&&(z=(z=v[l.name].onexit)?A||z.apply(null,(l?[l.segs,l.query,l.hash]:[]).concat(x)):!0));!1!==z&&(g&&(w=A||g(x,l)),!1!==w&&(w=v[x.name].onenter,w=A||w.apply(null,(x?[x.segs,x.query,x.hash]:[]).concat(l))),!1!==w&&(c?(F=!0,history[y?"replaceState":
"pushState"](null,"title",x.href)):(x="#"+x.href,location.hash!==x&&(F=!0,y?location.replace(x):location.hash=x)),t=p))}},route:function(b,c,g,h,m){if(null!=b)A["goto"](b,c,g,h,m,!0);else return null==t?D():k[t]}};A.location=A.route;var v=y(A,p);w(v,m);var F=!1;window.onhashchange=window.onpopstate=function(b){if(c||"popstate"!=b.type)!c&&F?F=!1:A["goto"](D(),null,null,null,!0)};E&&E();return A}})(domvm);
