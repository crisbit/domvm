/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(y){var w="function"==typeof HTMLElement,u=("undefined"==typeof window?{}:window).requestAnimationFrame,n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,
zoom:!0},t={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!t.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&t.isFunc(c.then)},isElem:function(c){return w?c instanceof HTMLElement:!1},execAll:function(c,k,b,g,h,C){var q;c&&(t.isArr(c)?c:[c]).forEach(function(c){q=c.call(null,k,b,g,h,C)});return q},repaint:function(c){},
insertArr:function(c,k,b,g){c.splice.apply(c,[b,g].concat(k))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,k){switch(c){case "input":case "textarea":case "select":case "option":switch(k){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,k){return isNaN(k)||n[c]?k:k+"px"},cmpArr:function(c,k){var b=c.length;if(b!=k.length)return!1;for(;b--;)if(c[b]!==
k[b])return!1;return!0},deepSet:function(c,k,b,g,h,C){k=k.split(".");var q=k.pop();k.forEach(function(b){c[b]||(c[b]={});c=c[b]});if(t.isFunc(c[q]))c[q](b,g,h,C);else c[q]=b},deepGet:function(c,k){var b=k.split(".");do c=c[b.shift()];while(b.length);return c},keyedIdx:function(c,k,b,g,h){for(g=0;g<k.length;g++)if(h=k[g],h.key===c)if(b){if(h.vm&&h.vm.ident[0]===b)return g}else return g;return-1},raft:function(c){function k(){b=0;c.apply(g,h)}if(!u)return c;var b,g,h;return function(){g=this;h=arguments;
b||(b=u(k))}}};y.utils=t})(domvm);(function(y){function w(a){for(I.repaint&&l.repaint(a);a=J.shift();)a[0].apply(null,a.slice(1))}function u(a,f){return!1===f?null:null==f&&null!=a?a:l.isVal(f)||l.isObj(f)||l.isArr(f)||l.isFunc(f)?f:null}function n(a,f,m,b,B,e){function p(){var a=F(f);if(v===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==v[e])return v=a,!0;return!1}function D(a,f,e){if(e)a[f]=a[f]||[],a[f].push(e);else for(var m in f)a[m]=a[m]||[],a[m].push(f[m])}function h(a,f,m){B=a;e=f;r.update(m,!1);null!=r.node&&(r.node.idx=
e,B.body[e]=r.node);return n(0,!1)}function d(a){return null==a?"":a}function n(a,b){b=!1!==b;if(a){for(var A=r;a--&&A.parent;)A=A.parent;A.redraw(0,!0);return A.vm}(A=r.node)&&c(r,"willRedraw",r);var h=r.refs,D=r.body;r.refs={};r.body=[];var x=p()&&r.render.call(r.api,r,f,m),d;if(!1===x||(d=g(x,B,e,r,!0))&&E(A,d))return A.moved=!0,A.wasSame=!0,r.refs=h,r.body=D,r;d.vm=r;r.node=d;h=l.isVal(m)&&"^"===m[0]?m.substr(1):l.isVal(d.ref)&&"^"===d.ref[0]?d.ref.substr(1):null;d.key=null!=m?m:d.key;for(D=B;D;)D.vm&&
(r.parent||(r.parent=D.vm,D.vm.body.push(r)),null!==h&&l.deepSet(D.vm.refs,h,d)),D=D.parent;if((h=A)&&A.el&&(d.type!==A.type||d.tag!==A.tag))var h=null,P=!0,v=A.el.parentNode;C(d,h);B&&(B.body[e]=d);b&&(A&&k(A),!A&&z||q(d,null,d.el),P&&((v||d.parent.el).insertBefore(d.el,v.childNodes[A.idx]),r.node=d));A&&c(r,"didRedraw",r);b&&A&&J.length&&w(d);return r}var z=!B;l.isArr(a)&&(f=a[1],m=a[2],b=a[3],a=a[0]);m=u(f,m);var v=!0,F=function(a){return!0},r={api:{},node:null,ident:[a,m],model:f,opts:b||{},render:null,
update:function(a,e){null==a||m===f&&!l.isVal(m)||(c(r,"willUpdate",r,a),f=r.model=a);return!1!==e?n(0):r},on:function(a,f){D(r.events,a,f)},hook:function(a,f){r.hooks=r.hooks||{};D(r.hooks,a,f)},diff:function(a){F=a},events:{},hooks:null,redraw:I.debounce?l.raft(n):n,patch:function(a,f){var e=null!=a.el;if(l.isObj(f)){a.props=a.props||{};var m="class"in f?(d(a["class"])+" "+d(f["class"])).trim():a.props["class"],B="style"in f?f.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=m,e.style=
B,e={tag:a.tag,el:a.el,ns:a.ns,props:e},x(e,a));a.props["class"]=m;a.props.style=B}else m=a.parent,e=C(g(f,m,a.idx,r),a),m.body[a.idx]=e},emit:function(a){for(var f=Array.prototype.slice.call(arguments),e=r,m;e;){if(m=e.events[a]){f[0]=m;l.execAll.apply(null,f);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,f){r.node||n(0);if(null==a)return r;var e=null;f&&(a.textContent="",e=a,a=null);q(r.node,e,null,a);w(r.node);return r},attach:function(a){r.node||n(0);t(r.node,a);return r},unmount:function(){k(r.node)},
moveTo:h};b&&b.hooks&&r.hook(b.hooks);l.execAll(H,r);r.render=a.call(r.api,r,f,m);return B?h(B,e):r}function t(a,f){a.el=f;f._node=a;for(var m in a.props){var b=a.props[m],B=l.isEvProp(m)?m:"."===m[0]?m.substr(1):null;null!==B&&(f[B]=b)}if(l.isArr(a.body))for(m=0;m<a.body.length;m++)t(a.body[m],f.childNodes[m])}function c(a,f,m,b,B,e){if(a&&a.hooks&&(a=a.hooks[f]))if("did"==f.substr(0,3))J.push([l.execAll,a,m,b,B,e]);else return l.execAll(a,m,b,B,e)}function k(a,f){var m=a.el&&!a.moved;if(m){var A=
c(a.vm,"willUnmount",a.vm),B=c(a,"willRemove",a),e=A||B;a.removed=!0}a.wasSame?a.wasSame=!1:(l.isArr(a.body)&&a.body.forEach(function(a,m){k(a,f||e)}),f||(e?e.then(function(){b(a,m,!0)}):b(a,m)));a.moved=!1}function b(a,f,m){null!=a.el&&a.el.parentNode?f&&(a.el.parentNode.removeChild(a.el),a.el=null,p(a),c(a.vm,"didUnmount",a.vm),c(a,"didRemove",a),m&&w(a.parent)):p(a)}function g(a,f,m,b,B){var e=a;a=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,
hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};l.isFunc(e)&&(e=e());var c=e.length;if(l.isArr(e)&&c){a.type=l.TYPE_ELEM;if(1<c){var d=1;!l.isObj(e[1])||e[1].redraw||l.isElem(e[1])||(a.props=e[1],d=2);a.body=c==d+1?l.isVal(e[d])?e[d]:l.isFunc(e[d])?e[d]():e.slice(d):e.slice(d)}e=e[0];c=M[e];c||(c=["",""],c={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||c)[1],"class":(e.match(/\.([-\w.]+)/)||c)[1].replace(/\./g,
" ")},M[e]=c);a.tag=c.tag;if(c.id||c["class"])e=a.props||{},c.id&&null==e.id&&(e.id=c.id),c["class"]&&(a["class"]=c["class"],e["class"]=c["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,g;for(g in e)!l.isEvProp(g)&&l.isFunc(e[g])&&("href"==g?(e.onclick=e[g],e.href=e[g].href):e[g]=e[g]()),l.isDynProp(a.tag,g)&&(e["."+g]=e[g]);if(l.isObj(e.style))for(var k in e.style)g=e.style[k],l.isFunc(g)&&(e.style[k]=g());a.key=l.isVal(e._key)?e._key:l.isVal(e._ref)?e._ref:l.isVal(e.id)?
e.id:l.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var p in e)"_"==p[0]&&(a[p.substr(1)]=e[p],delete e[p])}}else l.isVal(e)?(a.type=l.TYPE_TEXT,a.body=e):l.isElem(e)&&(a.type=l.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&l.deepSet(b.refs,a.ref,a);a.parent=f;a.idx=m;a.ns=f&&f.ns?f.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;B||a.diff||!l.isArr(a.body)||h(a,b);return a}function h(a,f){for(var m=0,c=a.body.length;m<c;m++){var b=a.body[m],e=null,d=null,p=!1,h=!1;l.isFunc(b)&&
(b=b());if(null==b)p=!0;else{var k=l.isArr(b),x=k?!1:l.isObj(b);if(k)b.length?b._expl?h=!0:"string"==typeof b[0]&&""!==b[0]?(d=g(b,a,m,f),e=d.key):l.isFunc(b[0])?e=u(b[1],b[2]):h=!0:p=!0;else if(x)if(l.isFunc(b.redraw))b.moveTo(a,m),d=b.node,e=b.ident[1];else if(l.isElem(b))d=g(b,a,m,f);else{a.body[m--]=""+b;continue}else""===b?p=!0:0<m&&a.body[m-1].type===l.TYPE_TEXT?(a.body[m-1].body+=""+b,p=!0):d=g(""+b,a,m,f)}p||h?(h?l.insertArr(a.body,b,m,1):a.body.splice(m,1),c=a.body.length,m--):(null!==e&&
(a.hasKeys=!0),a.body[m]=d||b)}a.body._init=!0}function C(a,f){if(E(f,a))return f.moved=!0,f.wasSame=!0,f;f&&(c(a,"willRecycle",f,a),d(f,a),c(a,"didRecycle",f,a));if(l.isArr(a.body)){if(!a.body._init){for(var b=a;!b.vm;)b=b.parent;h(a,b.vm)}var g=0;a.body.forEach(function(b,e){var m=l.isArr(b);if(f){var c=z(b,a,f,g);if(null!==c){var d=c[0],c=c[1];d===g&&g++;d=f.body[d];d.vm?m?2===c?d.vm.moveTo(a,e,b[1]):1===c&&n(b[0],b[1],b[2],b[3],a,e):b.vm&&2===c&&b.vm===d.vm&&d.vm.moveTo(a,e):a.body[e]=C(b,d);
return}}m?n(b[0],b[1],b[2],b[3],a,e):a.body[e]=C(b)})}return a}function q(a,f,b,d){for(var g=!a.el;b&&b._node.removed;)b=b.nextSibling;g&&a.vm&&c(a.vm,"willMount",a.vm);if(a.type==l.TYPE_ELEM)if(g&&(a.el=f||(a.ns?L.createElementNS(G[a.ns],a.tag):L.createElement(a.tag)),a.props&&x(a)),l.isArr(a.body)){f=0;for(var e=a.el.firstChild;f<a.body.length;f++)e=q(a.body[f],null,e)}else l.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:g&&(a.el.textContent=a.body));else a.type==l.TYPE_TEXT&&g&&(a.el=L.createTextNode(a.body));
a.el._node=a;f=a.parent;b!==a.el&&(d||f&&f.el)&&(f=g?"Insert":"Reinsert",c(a,"will"+f,a),(d||a.parent.el).insertBefore(a.el,b),c(a,"did"+f,a));g&&a.vm&&a.vm.hooks&&!a.moved&&c(a.vm,"didMount",a.vm);return b!==a.el?b:b.nextSibling}function z(a,f,b,c,d){var e=l.isArr(a),g=e?u(a[1],a[2]):a.key,p=b.hasKeys,h=f.hasKeys;b=b.body;f=f.body;if(null!==g&&p)return a=l.keyedIdx(g,b,e?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;d=0===d?0:d||b.length-1;for(g=null;c<=d;c++)if(p=b[c],null!==p&&
p.el)if(e&&p.vm){if(p.vm.ident[0]===a[0]){if(p.vm.ident[1]===u(a[1],a[2]))return[c,2];!g&&h&&-1==l.keyedIdx(p.key,f,p.vm.ident[0])&&(g=[c,1])}}else if(a.type===p.type&&(a.type===l.TYPE_TEXT||null!==a.tag&&a.tag===p.tag)&&(null===p.key||!h||-1==l.keyedIdx(p.key,f,p.vm?p.vm.ident[0]:null)))return[c,1];return g}function E(a,f){if(a&&a.diff&&f.diff&&a.diff[0]===f.diff[0]){var b=a.diff.slice(1).concat(f.diff.slice(1));return!f.diff[0].apply(null,b)}return!1}function d(a,f){if(a.el)if(f.el=a.el,a.el=null,
f.el&&(f.el._node=f),f.type===l.TYPE_TEXT&&f.body!==a.body)f.el.nodeValue=f.body;else{x(f,a);var b=!l.isArr(f.body),c=!l.isArr(a.body);b&&f.body!==a.body?c&&f.el.firstChild?f.el.firstChild.nodeValue=f.body:f.raw?f.el.innerHTML=f.body:f.el.textContent=f.body:c&&!b&&(f.el.textContent="");a.moved=!0}}function p(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;K.push(a)}function F(a,f,b,c){return function(b){var e,d=b.target._node,
g=null;if(l.isFunc(a))e=a.call(f,b,d,c);else if(l.isArr(a))g=a.slice(1),e=a[0].apply(f,g.concat(b,d,c));else if(l.isObj(a))for(var m in a){var p=a[m];null!=p&&"_"!=m[0]&&b.target.matches(m)&&(l.isArr(p)?(g=p.slice(1),e=p[0].apply(f,g.concat(b,d,c))):l.isFunc(p)&&(e=p.call(f,b,d,c)))}!1===e&&(b.preventDefault(),b.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:d,event:b,data:g})}}function x(a,b){var c=!b;b=b||{};if(b.props||a.props){var d=b.props||{},g=
a.props||{},e=d.style,p=g.style;if(l.isObj(e)||l.isObj(p))N(a.el,a.tag,e||{},p||{},Q,v,a.ns,c,a),d.style=g.style=null;N(a.el,a.tag,d,g,R,O,a.ns,c,a);p&&(g.style=p)}}function N(a,b,c,d,g,e,p,h,k){for(var x in d)if(b=d[x],null!==b){var q="."===x[0]?a[x.substr(1)]:c[x];b===q||l.isArr(b)&&l.isArr(q)&&l.cmpArr(b,q)||g(a,x,b,p,h,k)}for(x in c)null!==c[x]&&null==d[x]&&e(a,x,p,h)}function Q(a,b,c){a.style[b]=l.autoPx(b,c)}function v(a,b){a.style[b]=""}function R(a,b,c,d,g,e){if("class"===b)a.className=c;
else if("id"===b)a.id=c;else if("."===b[0])b=b.substr(1),"svg"===d?a[b].baseVal=c:a[b]=c;else if(l.isEvProp(b)){for(d=e;!d.vm;)d=d.parent;a[b]=F(c,d.vm.opts.evctx||d.vm.model||null,e,d.vm)}else!1===c?O(a,b,d,g):a.setAttribute(b,!0===c?"":c)}function O(a,b,c,d){d||("class"===b?a.className="":"id"===b?a.id="":"."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):l.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var G={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
L="undefined"==typeof document?{}:document,M={},K=[],J=[],I={debounce:!0,repaint:!0};y.view=n;y.view.config=function(a){for(var b in a)I[b]=a[b]};var H=null;y.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var l=y.utils;return y})(domvm);(function(y){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,u=y.utils;y.html=function(n){var t="";switch(n.type){case u.TYPE_ELEM:t+="<"+n.tag;if(n.props){var c=u.isVal(n.props.style)?n.props.style:"",k=u.isObj(n.props.style)?n.props.style:null;if(k)for(var b in k)null!==k[b]&&(c+=u.camelDash(b)+": "+u.autoPx(b,k[b])+"; ");for(b in n.props)u.isEvProp(b)||"."===b[0]||(k=n.props[b],u.isFunc(k)&&(k=k()),u.isObj(k)||(!0===k?t+=" "+b:!1!==k&&null!==k&&
"."!==b[0]&&(t+=" "+b+'="'+k+'"')));c.length&&(t+=' style="'+c.trim()+'"')}if(n.ns&&"svg"!==n.tag&&"math"!==n.tag&&!n.body)return t+"/>";t+=">";break;case u.TYPE_TEXT:return n.body}w.test(n.tag)||(u.isArr(n.body)?n.body.forEach(function(b){t+=y.html(b)}):t+=n.body||"",t+="</"+n.tag+">");return t}})(domvm);(function(y){var w=y.utils;y.watch=function(u){function n(){}function t(b,c,h,n,q){q=q||{};q.method=b.toUpperCase();"credentials"in q||(q.credentials="same-origin");null!==h&&(w.isArr(h)||w.isObj(h)?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(h)):q.body=""+h);var z=n,E=function(b){return Promise.reject(b)};n instanceof Array&&(z=n[0],n[1]&&(E=n[1]));var d={type:"fetch",fetch:{method:b,url:c,body:h}};n=fetch(c,q).then(function(b){if(200<=
b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(z,E).then(function(b){!1!==b&&k.fire(d);return b},function(b){d.error=b;k.fire(d);return Promise.reject(b)});n._fetchArgs=[b,c,h,[z,E],q];return n}var c=[];w.isFunc(u)&&c.push(u);var k={on:function(b){c.push(b);return k},off:function(b){c.splice(c.indexOf(b),
1);return k},fire:w.raft(function(b){w.execAll(c,b);return k}),prop:function(b,c,h){var C=b,q=function(b,c,g){if(arguments.length&&b!==C){g=g||{type:"prop",prop:q,data:{old:C,"new":b}};h&&(b=h(g));if("undefined"==typeof b||b===C)return C;C=g.data["new"]=b;w.isFunc(c)?c(g):!1!==c&&k.fire(g)}return C};q._prop=!0;if(c&&c.then){q.update=n;if(c._fetchArgs){var z=c._fetchArgs[3];c._fetchArgs[3]=[function(b){return q(z[0]?z[0](b):b)},z[1]];q.update=function(){t.apply(null,c._fetchArgs)}}c.then(q)}return q.toString=
q},sync:function(b,c,h){var n=b,q=c;w.isFunc(n)||(n=function(c,g,d){if("string"==typeof b){var h,k;"e."==b.substr(0,2)?(h=c,k=b.substr(2)):(h=c.target,k=b)}return w.deepGet(h,k)});w.isArr(q)&&(q=function(b,h,d){var p=c[0],n=c[1];w.isFunc(n)&&(n=n(d.event,d.node,d.vm));var x=w.deepGet(p,n);b!==x&&(w.deepSet(p,n,b,h,d),w.isFunc(h)?h(d):!1!==h&&k.fire(d))});return function(b,c,d){var g={type:"sync",vm:d,node:c,event:b};q(n(b,c,d),h,g)}},fetch:t,get:function(b,c,h){h?b+=k.query(c):h=c;return t("get",
b,null,h)},"delete":function(b,c,h){h?b+=k.query(c):h=c;return t("delete",b,null,h)},post:function(b,c,h){return t("post",b,c,h)},put:function(b,c,h){return t("put",b,c,h)},patch:function(b,c,h){return t("patch",b,c,h)},query:function(b){if(!w.isObj(b))return"";var c=[],h=encodeURIComponent,k;for(k in b)c.push(h(k)+"="+h(b[k]));return c.length?"?"+c.join("&"):""}};return k}})(domvm);(function(y){function w(b,c,g,h,d,k){var n=null,x=null,t=null;if("/"==g[0]){t=g;x=!1;h={};k=t.split("#");c=k[0].split("?");n=c[0];k=k[1];c[1]&&(d={},c[1].split("&").map(function(b){b=b.split("=");d[b[0]]=null==b[1]?!0:b[1]}));var w,v;for(v in b){g=b[v];var u=g.path;if(w=n.match(g.regexPath)){x=v;-1!==u.indexOf(":")&&(h={},w.shift(),u.replace(/:([^\/]+)/g,function(b,c){h[c]=w.shift()}));break}}}else{x=g;g=b[x];var u=c+g.path,y=g.vars||{},t=-1!==u.indexOf(":")?n=u.replace(/:([^\/]+)/g,function(b,c){if((y[c]||
/^[^\/]+$/).test(h[c]))return h[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+h[c]+"'");}):n=u;if(d){var t=t+"?",G;for(G in d)t+=G+(!0!==d[G]?"="+d[G]:"")+"&";t=t.slice(0,-1)}t+=k?"#"+k:""}return{href:t,name:x,path:n,segs:h,hash:k,query:d}}function u(b,c){for(var g in b){var h=b[g];h.regexPath=new RegExp("^"+c+h.path.replace(/:([^\/]+)/g,function(b,c){var g=""+((h.vars||{})[c]||/[^\/]+/);return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var n=[],t=null,c=!1,k=null,
b=null,g=null,h="";y.route=function(y,q){function z(){var b=location,b=c?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return w(p,h,b)}var E=null,d={href:function(b,g,k,n,t){var q=w(p,h,b,g,k,n);b=function(b){d["goto"](q,g,k,n,t);b.preventDefault()};b.href=(c?"":"#")+q.href;return b},config:function(d){(c=d.useHist)&&(h=d.root||"");k=d.willEnter||null;b=d.willExit||null;g=d.notFound||null;E=d.init||null},refresh:function(){d["goto"](z(),null,null,null,!0)},"goto":function(d,q,u,v,y,C){d.href||
(d=w(p,h,d,q,u,v));if(!1===d.name)g?g(d):console.log("Could not find route");else{q=null;for(v=0;v<n.length;v++)if(n[v].href===d.href){q=v;break}null===q&&(n.splice(t+1,1E4),n.push(d),q=n.length-1);d=n[t];v=n[q];var z=!0;u=!0;null!==t&&(b&&(z=C||b(d,v)),!1!==z&&(z=(z=p[d.name].onexit)?C||z.apply(null,(d?[d.segs,d.query,d.hash]:[]).concat(v)):!0));!1!==z&&(k&&(u=C||k(v,d)),!1!==u&&(u=p[v.name].onenter,u=C||u.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(d))),!1!==u&&(c?(F=!0,history[y?"replaceState":
"pushState"](null,"title",v.href)):(v="#"+v.href,location.hash!==v&&(F=!0,y?location.replace(v):location.hash=v)),t=q))}},route:function(b,c,g,h,k){if(null!=b)d["goto"](b,c,g,h,k,!0);else return null==t?z():n[t]}};d.location=d.route;var p=y(d,q);u(p,h);var F=!1;window.onhashchange=window.onpopstate=function(b){if(c||"popstate"!=b.type)!c&&F?F=!1:d["goto"](z(),null,null,null,!0)};E&&E();return d}})(domvm);
