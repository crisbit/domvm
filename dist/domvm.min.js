/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(v){var t=("undefined"==typeof window?{}:window).requestAnimationFrame,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},k={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!k.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&k.isFunc(c.then)},isElem:function(c){return c instanceof HTMLElement},execAll:function(c,d,g,a,p,w){var n;c&&(k.isArr(c)?c:[c]).forEach(function(c){n=c.call(null,d,g,a,p,w)});return n},tick:function(c,d){d&&t?t&&t(function(){k.tick(c,
d-1)}):k.isArr(c)?c[0].apply(null,c.slice(1)):c()},insertArr:function(c,d,g,a){c.splice.apply(c,[g,a].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||r[c]?d:d+"px"},cmpArr:function(c,d){var g=
c.length;if(g!=d.length)return!1;for(;g--;)if(c[g]!==d[g])return!1;return!0},deepSet:function(c,d,g,a,p,w){d=d.split(".");var n=d.pop();d.forEach(function(a){c[a]||(c[a]={});c=c[a]});if(k.isFunc(c[n]))c[n](g,a,p,w);else c[n]=g},deepGet:function(c,d){var g=d.split(".");do c=c[g.shift()];while(g.length);return c},keyedIdx:function(c,d,g,a,p){for(a=0;a<d.length;a++)if(p=d[a],p.key===c)if(g){if(p.vm&&p.vm.view[0]===g)return a}else return a;return-1},raft:function(c){function d(){g=0;c.apply(a,p)}if(!t)return c;
var g,a,p;return function(){a=this;p=arguments;g||(g=t(d))}}};v.utils=k})(domvm);(function(v){function t(){for(var b;b=M.pop();)b[0].apply(null,b.slice(1))}function r(b,h){return!1===h?null:null==h&&null!=b?b:l.isVal(h)||l.isObj(h)||l.isArr(h)||l.isFunc(h)?h:null}function k(b,h,m,a,A,e){function f(b,h,e){if(e)b[h]=b[h]||[],b[h].push(e);else for(var m in h)b[m]=b[m]||[],b[m].push(h[m])}function I(b,h,m){A=b;e=h;q.update(m,!1);null!=q.node&&(A.body[e]=q.node);return k(0,!1)}function w(b){return null==b?"":b}function k(b,c){if(b){for(var a=q;b--&&a.parent;)a=a.parent;a.redraw(0,
!0);return a.vm}(a=q.node)&&d(q,"willRedraw",q);var f=q.refs;q.refs={};q.body=[];var B=q.render.call(q.api,q,h,m),y;if(!1===B||(y=p(B,A,e,q,!0))&&C(a,y))return a.moved=!0,a.wasSame=!0,q.refs=f,q;y.vm=q;q.node=y;f=l.isVal(m)&&"^"===m[0]?m.substr(1):l.isVal(y.ref)&&"^"===y.ref[0]?y.ref.substr(1):null;y.key=null!=m?m:y.key;for(B=A;B;)B.vm&&(q.parent||(q.parent=B.vm,B.vm.body.push(q)),null!==f&&l.deepSet(B.vm.refs,f,y)),B=B.parent;if((f=a)&&(y.type!==a.type||y.tag!==a.tag))var f=null,I=!0,w=a.el.parentNode;
n(y,f);A&&(A.body[e]=y);!1!==c&&(a&&g(a),!a&&x||u(y,null,y.el),I&&(w||y.parent.el).insertBefore(y.el,w.childNodes[a.idx]));a&&d(q,"didRedraw",q);!1!==c&&l.tick(t,2);return q}var x=!A;l.isArr(b)&&(h=b[1],m=b[2],a=b[3],b=b[0]);m=r(h,m);var q={api:{},node:null,view:[b,m],model:h,opts:a||{},render:null,update:function(b,e){null==b||m===h&&!l.isVal(m)||(h=q.model=b);return!1!==e?k(0):q},on:function(b,h){f(q.events,b,h)},hook:function(b,h){q.hooks=q.hooks||{};f(q.hooks,b,h)},events:{},hooks:null,redraw:J.useRaf?
l.raft(k):k,patch:function(b,h){var e=null!=b.el;if(l.isObj(h)){var m="class"in h?(w(b["class"])+" "+w(h["class"])).trim():b.props["class"],c="style"in h?h.style:b.props.style;e&&(e=Object.create(b.props),e["class"]=m,e.style=c,e={tag:b.tag,el:b.el,ns:b.ns,props:e},z(e,b));b.props["class"]=m;b.props.style=c}else m=b.parent,e=n(p(h,m,b.idx,q),b),m.body[b.idx]=e},emit:function(b){for(var h=Array.prototype.slice.call(arguments),e=q,m;e;){if(m=e.events[b]){h[0]=m;l.execAll.apply(null,h);break}e=e.parent}},
refs:{},parent:null,body:[],mount:function(b,h){var e=null;h&&(b.textContent="",e=b,b=null);u(q.node,e,null,b);return q},attach:function(b){c(q.node,b);return q},unmount:function(){g(q.node)},moveTo:I,updIdx:function(b){e=b}};a&&a.hooks&&q.hook(a.hooks);l.execAll(H,q);q.render=b.call(q.api,q,h,m);return A?I(A,e):k(0)}function c(b,h){b.el=h;h._node=b;for(var m in b.props){var a=b.props[m],A=l.isEvProp(m)?m:"."===m[0]?m.substr(1):null;null!==A&&(h[A]=a)}if(l.isArr(b.body))for(m=0;m<b.body.length;m++)c(b.body[m],
h.childNodes[m])}function d(b,h,m,c,a,e){if(b&&b.hooks&&(b=b.hooks[h]))if(J.useRaf&&"did"==h.substr(0,3))M.push([l.execAll,b,m,c,a,e]);else return l.execAll(b,m,c,a,e)}function g(b,h){var m=b.el&&!b.moved;if(m){var c=d(b.vm,"willUnmount",b.vm),A=d(b,"willRemove",b),e=c||A;b.removed=!0}b.wasSame?b.wasSame=!1:(l.isArr(b.body)&&b.body.forEach(function(b,m){g(b,h||e)}),h||(e?e.then(function(){a(b,m)}):a(b,m)));b.moved=!1}function a(b,h){null!=b.el&&b.el.parentNode&&(h&&(b.el.parentNode.removeChild(b.el),
b.el=null,d(b.vm,"didUnmount",b.vm),d(b,"didRemove",b)),l.isArr(b.body)&&b.body.forEach(function(b,h){a(b,!b.moved)}))}function p(b,h,m,c,a){var e=b;b={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};l.isFunc(e)&&(e=e());var f=e.length;if(l.isArr(e)&&f){b.type=l.TYPE_ELEM;if(1<f){var p=1;l.isObj(e[1])&&!l.isElem(e[1])&&(b.props=e[1],p=2);b.body=f==p+1?l.isVal(e[p])?e[p]:
l.isFunc(e[p])?e[p]():e.slice(p):e.slice(p)}e=e[0];f=N[e];f||(f=["",""],f={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||f)[1],"class":(e.match(/\.([-\w.]+)/)||f)[1].replace(/\./g," ")},N[e]=f);b.tag=f.tag;if(f.id||f["class"])e=b.props||{},f.id&&null==e.id&&(e.id=f.id),f["class"]&&(b["class"]=f["class"],e["class"]=f["class"]+(null!=e["class"]?" "+e["class"]:"")),b.props=e;if(b.props){var e=b.props,d;for(d in e)!l.isEvProp(d)&&l.isFunc(e[d])&&("href"==d?(e.onclick=e[d],e.href=e[d].href):
e[d]=e[d]()),l.isDynProp(b.tag,d)&&(e["."+d]=e[d]);if(l.isObj(e.style))for(var g in e.style)d=e.style[g],l.isFunc(d)&&(e.style[g]=d());l.isObj(e._hooks)&&(b.hooks=e._hooks,e._hooks=null);b.key=l.isVal(e._key)?e._key:l.isVal(e._ref)?e._ref:l.isVal(e.id)?e.id:l.isVal(e.name)?e.name:null;null!=e._ref&&(b.ref=e._ref);e._raw&&(b.raw=!0);null!=e._data&&(b.data=e._data);e._diff&&(b.diff=e._diff);e._ref=e._key=e._raw=e._data=e._diff=null}}else l.isVal(e)?(b.type=l.TYPE_TEXT,b.body=e):l.isElem(e)&&(b.type=
l.TYPE_ELEM,b.el=e,b.tag=e.nodeName.toLowerCase());null!==b.ref&&l.deepSet(c.refs,b.ref,b);b.parent=h;b.idx=m;b.ns=h&&h.ns?h.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;a||b.diff||!l.isArr(b.body)||w(b,c);return b}function w(b,h){for(var m=0,c=b.body.length;m<c;m++){var a=b.body[m],e=null,f=null,d=!1,g=!1;l.isFunc(a)&&(a=a());if(null==a)d=!0;else{var w=l.isArr(a),n=w?!1:l.isObj(a);if(w)a.length?"string"==typeof a[0]&&""!==a[0]?(f=p(a,b,m,h),e=f.key):l.isFunc(a[0])?e=r(a[1],a[2]):g=!0:d=!0;else if(n)if(l.isFunc(a.redraw))a.moveTo(b,
m),f=a.node,e=a.view[1];else if(l.isElem(a))f=p(a,b,m,h);else{b.body[m--]=""+a;continue}else""===a?d=!0:0<m&&b.body[m-1].type===l.TYPE_TEXT?(b.body[m-1].body+=""+a,d=!0):f=p(""+a,b,m,h)}d||g?(g?l.insertArr(b.body,a,m,1):b.body.splice(m,1),c=b.body.length,m--):(null!==e&&(b.hasKeys=!0),b.body[m]=f||a)}b.body._init=!0}function n(b,h){if(C(h,b))return h.moved=!0,h.wasSame=!0,h;h&&(d(b,"willRecycle",h,b),x(h,b),d(b,"didRecycle",h,b));if(l.isArr(b.body)){if(!b.body._init){for(var a=b;!a.vm;)a=a.parent;
w(b,a.vm)}var c=0;b.body.forEach(function(a,e){var m=l.isArr(a);if(h){var f=D(a,b,h,c);if(null!==f){var d=f[0],f=f[1];d===c&&c++;d=h.body[d];d.vm?m?2===f?d.vm.moveTo(b,e,a[1]):1===f&&k(a[0],a[1],a[2],a[3],b,e):a.vm&&2===f&&a.vm===d.vm&&d.vm.moveTo(b,e):b.body[e]=n(a,d);return}}m?k(a[0],a[1],a[2],a[3],b,e):b.body[e]=n(a)})}return b}function u(b,h,a,c){for(var f=!b.el;a&&a._node.removed;)a=a.nextSibling;f&&d(b.vm,"willMount",b.vm);if(b.type==l.TYPE_ELEM)if(f&&(b.el=h||(b.ns?K.createElementNS(O[b.ns],
b.tag):K.createElement(b.tag)),b.props&&z(b)),l.isArr(b.body)){h=0;for(var e=b.el.firstChild;h<b.body.length;h++)e=u(b.body[h],null,e)}else l.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:f&&(b.el.textContent=b.body));else b.type==l.TYPE_TEXT&&f&&(b.el=K.createTextNode(b.body));b.el._node=b;h=b.parent;a!==b.el&&(c||h&&h.el)&&(h=f?"Insert":"Reinsert",d(b,"will"+h,b),(c||b.parent.el).insertBefore(b.el,a),d(b,"did"+h,b));f&&b.vm&&b.vm.hooks&&!b.moved&&d(b.vm,"didMount",b.vm);return a!==b.el?a:a.nextSibling}
function D(b,h,a,f,c){var e=l.isArr(b),d=e?r(b[1],b[2]):b.key,p=a.hasKeys,g=h.hasKeys;a=a.body;h=h.body;if(null!==d&&p)return b=l.keyedIdx(d,a,e?b[0]:null),-1<b?[b,2]:null;f=f||0;if(f>a.length-1)return null;c=0===c?0:c||a.length-1;for(d=null;f<=c;f++)if(p=a[f],null!==p&&p.el)if(e&&p.vm){if(p.vm.view[0]===b[0]){if(p.vm.view[1]===r(b[1],b[2]))return[f,2];!d&&g&&-1==l.keyedIdx(p.key,h,p.vm.view[0])&&(d=[f,1])}}else if(b.type===p.type&&(b.type===l.TYPE_TEXT||null!==b.tag&&b.tag===p.tag)&&(null===p.key||
!g||-1==l.keyedIdx(p.key,h,p.vm?p.vm.view[0]:null)))return[f,1];return d}function C(b,a){if(b&&b.diff&&a.diff&&b.diff[0]===a.diff[0]){var f=b.diff.slice(1).concat(a.diff.slice(1));return!a.diff[0].apply(null,f)}return!1}function x(b,a){a.el=b.el;b.el=null;a.el&&(a.el._node=a);if(a.type===l.TYPE_TEXT&&a.body!==b.body)a.el.nodeValue=a.body;else{z(a,b);var f=!l.isArr(a.body),c=!l.isArr(b.body);f&&a.body!==b.body?c&&a.el.firstChild?a.el.firstChild.nodeValue=a.body:a.raw?a.el.innerHTML=a.body:a.el.textContent=
a.body:c&&!f&&(a.el.textContent="");b.moved=!0}}function f(b,a,f,c){return function(f){var e,d=f.target._node,m=null;if(l.isFunc(b))e=b.call(a,f,d,c);else if(l.isArr(b))m=b.slice(1),e=b[0].apply(a,m.concat(f,d,c));else if(l.isObj(b))for(var p in b){var g=b[p];null!=g&&"_"!=p[0]&&f.target.matches(p)&&(l.isArr(g)?(m=g.slice(1),e=g[0].apply(a,m.concat(f,d,c))):l.isFunc(g)&&(e=g.call(a,f,d,c)))}!1===e&&(f.preventDefault(),f.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",
vm:c,node:d,event:f,data:m})}}function z(b,a){var f=!a;a=a||{};if(a.props||b.props){var c=a.props||{},d=b.props||{},e=c.style,p=d.style;if(l.isObj(e)||l.isObj(p))G(b.el,b.tag,e||{},p||{},P,E,b.ns,f,b),c.style=d.style=null;G(b.el,b.tag,c,d,L,F,b.ns,f,b);p&&(d.style=p)}}function G(b,a,f,c,d,e,p,g,w){for(var n in c)if(a=c[n],null!==a){var k="."===n[0]?b[n.substr(1)]:f[n];a===k||l.isArr(a)&&l.isArr(k)&&l.cmpArr(a,k)||d(b,n,a,p,g,w)}for(n in f)null!==f[n]&&null==c[n]&&e(b,n,p,g)}function P(b,a,f){b.style[a]=
l.autoPx(a,f)}function E(b,a){b.style[a]=""}function L(b,a,c,d,p,e){if("."===a[0])a=a.substr(1),"svg"===d?b[a].baseVal=c:b[a]=c;else if("class"===a)b.className=c;else if("id"===a)b[a]=c;else if(l.isEvProp(a)){for(d=e;!d.vm;)d=d.parent;b[a]=f(c,d.vm.opts.evctx||d.vm.model||null,e,d.vm)}else!1===c?F(b,a,d,p):b.setAttribute(a,!0===c?"":c)}function F(b,a,f,c){c||("."===a[0]?(a=a.substr(1),"svg"===f?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||l.isEvProp(a)?b[a]=null:b.removeAttribute(a))}
var O={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},K="undefined"==typeof document?{}:document,N={},M=[],J={useRaf:!0};v.view=k;v.view.config=function(b){J=b};var H=null;v.view.extend=function(b,a){H=!H||a?[]:H;H.push(b)};var l=v.utils;return v})(domvm);(function(v){var t=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=v.utils;v.html=function(k){var c="";switch(k.type){case r.TYPE_ELEM:c+="<"+k.tag;if(k.props){var d=r.isVal(k.props.style)?k.props.style:"",g=r.isObj(k.props.style)?k.props.style:null;if(g)for(var a in g)null!==g[a]&&(d+=r.camelDash(a)+": "+r.autoPx(a,g[a])+"; ");for(a in k.props)r.isEvProp(a)||"."===a[0]||(g=k.props[a],r.isFunc(g)&&(g=g()),r.isObj(g)||(!0===g?c+=" "+a:!1!==g&&null!==g&&
"."!==a[0]&&(c+=" "+a+'="'+g+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(k.ns&&"svg"!==k.tag&&"math"!==k.tag&&!k.body)return c+"/>";c+=">";break;case r.TYPE_TEXT:return k.body}t.test(k.tag)||(r.isArr(k.body)?k.body.forEach(function(a){c+=v.html(a)}):c+=k.body||"",c+="</"+k.tag+">");return c}})(domvm);(function(v){var t=v.utils;v.watch=function(r){function k(){}function c(a,c,d,n,u){u=u||{};u.method=a.toUpperCase();"credentials"in u||(u.credentials="same-origin");null!==d&&(t.isArr(d)||t.isObj(d)?(u.headers=u.headers||new Headers,u.headers.set("Content-Type","application/json"),u.body=JSON.stringify(d)):u.body=""+d);var D=n,C=k;n instanceof Array&&(D=n[0],n[1]&&(C=n[1]));var x={type:"fetch",fetch:{method:a,url:c,body:d}};n=fetch(c,u).then(function(a){if(200<=a.status&&300>a.status)return a;var c=
Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();case "text/plain":return a.text();default:return a}}).then(D,C).then(function(a){!1!==a&&g.fire(x);return a},function(a){x.error=a;g.fire(x);return a});n._fetchArgs=[a,c,d,[D,C],u];return n}var d=[];t.isFunc(r)&&d.push(r);var g={on:function(a){d.push(a);return g},off:function(a){d.splice(d.indexOf(a),1);return g},fire:t.raft(function(a){t.execAll(d,
a);return g}),prop:function(a,d,w){var n=a,u=function(a,c,f){if(arguments.length&&a!==n){f=f||{type:"prop",prop:u,data:{old:n,"new":a}};w&&(a=w(f));if("undefined"==typeof a||a===n)return n;n=f.data["new"]=a;t.isFunc(c)?c(f):!1!==c&&g.fire(f)}return n};u._prop=!0;if(d&&d.then){u.update=k;if(d._fetchArgs){var D=d._fetchArgs[3];d._fetchArgs[3]=[function(a){return u(D[0]?D[0](a):a)},D[1]];u.update=function(){c.apply(null,d._fetchArgs)}}d.then(u)}return u.toString=u},sync:function(a,c,d){var n=a,k=c;t.isFunc(n)||
(n=function(c,d,p){if("string"==typeof a){var f,g;"e."==a.substr(0,2)?(f=c,g=a.substr(2)):(f=c.target,g=a)}return t.deepGet(f,g)});t.isArr(k)&&(k=function(a,d,n){var f=c[0],k=c[1];t.isFunc(k)&&(k=k(n.event,n.node,n.vm));var w=t.deepGet(f,k);a!==w&&(t.deepSet(f,k,a,d,n),t.isFunc(d)?d(n):!1!==d&&g.fire(n))});return function(a,c,p){var f={type:"sync",vm:p,node:c,event:a};k(n(a,c,p),d,f)}},fetch:c,get:function(a,d,k){k?a+=g.query(d):k=d;return c("get",a,null,k)},"delete":function(a,d,k){k?a+=g.query(d):
k=d;return c("delete",a,null,k)},post:function(a,d,g){return c("post",a,d,g)},put:function(a,d,g){return c("put",a,d,g)},patch:function(a,d,g){return c("patch",a,d,g)},query:function(a){if(!t.isObj(a))return"";var c=[],d=encodeURIComponent,g;for(g in a)c.push(d(g)+"="+d(a[g]));return c.length?"?"+c.join("&"):""}};return g}})(domvm);(function(v){function t(c,d,g,k,t,r){var x=null,f=null,z=null;if("/"==g[0]){z=g;f=!1;k={};r=z.split("#");d=r[0].split("?");x=d[0];r=r[1];d[1]&&(t={},d[1].split("&").map(function(a){a=a.split("=");t[a[0]]=null==a[1]?!0:a[1]}));var G,v;for(v in c){g=c[v];var E=g.path;if(G=x.match(g.regexPath)){f=v;-1!==E.indexOf(":")&&(k={},G.shift(),E.replace(/:([^\/]+)/g,function(a,c){k[c]=G.shift()}));break}}}else{f=g;g=c[f];var E=d+g.path,L=g.vars||{},z=-1!==E.indexOf(":")?x=E.replace(/:([^\/]+)/g,function(c,d){if((L[d]||
a).test(k[d]))return k[d]+="";throw Error("Invalid value for route '"+E+"' segment '"+d+"': '"+k[d]+"'");}):x=E;if(t){var z=z+"?",F;for(F in t)z+=F+(!0!==t[F]?"="+t[F]:"")+"&";z=z.slice(0,-1)}z+=r?"#"+r:""}return{href:z,name:f,path:x,segs:k,hash:r,query:t}}function r(c,d){for(var g in c){var k=c[g];k.regexPath=new RegExp("^"+d+k.path.replace(/:([^\/]+)/g,function(c,d){var g=""+((k.vars||{})[d]||a);return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var k=[],c=null,d=!1,g="",a=/^[^\/]+$/;v.route=
function(a,w){function n(){var a=location,a=d?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return t(x,g,a)}var u=null,v={href:function(a,c,k,p,n){var r=t(x,g,a,c,k,p);return d?(a=function(a){v["goto"](r,null,null,null,n);a.preventDefault()},a.href=r.href,a):"#"+r.href},config:function(a){(d=a.useHist)&&(g=a.root||"");u=a.init||null},refresh:function(){v["goto"](n(),null,null,null,!0)},"goto":function(a,p,n,r,u){u=u||C;a.href||(a=t(x,g,a,p,n,r));if(!1===a.name)console.log("Could not find route");
else{p=null;for(n=0;n<k.length;n++)if(k[n].href===a.href){p=n;break}null===p&&(k.splice(c+1,1E4),k.push(a),p=k.length-1);a=k[c];n=k[p];r=!0;null!==c&&(r=(r=x[a.name].onexit)?r.apply(null,(a?[a.segs,a.query,a.hash]:[]).concat(n)):!0);if(!1!==r&&!1!==x[n.name].onenter.apply(null,(n?[n.segs,n.query,n.hash]:[]).concat(a))){if(d)history[u?"replaceState":"pushState"](null,"title",n.href);c=p}C=!1}},location:function(){return C?n():k[c]}},C=!0,x=a(v,w);r(x,g);window.onhashchange=window.onpopstate=function(a){(d||
"popstate"!=a.type)&&v["goto"](n(),null,null,null,!0)};u&&u();return v}})(domvm);
